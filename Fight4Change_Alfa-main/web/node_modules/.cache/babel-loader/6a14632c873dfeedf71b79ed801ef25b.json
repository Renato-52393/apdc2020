{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mifer\\\\Desktop\\\\Fight4Change_Alfa\\\\web\\\\src\\\\Components\\\\Maps\\\\Details.js\",\n    _s = $RefreshSig$();\n\n/*global google*/\nimport React, { useState } from 'react';\nimport \"./map.css\";\nimport { MDBtn, MBtn } from './Button';\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport { LocateMDBtn, LocateMBtn } from './LocateButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst mapContainerStyle = {\n  height: \"80vh\",\n  width: \"50%\"\n};\nconst center = {\n  lat: 38.660783,\n  lng: -9.205681\n};\n\nfunction CreateEvents() {\n  _s();\n\n  const [eventsName, setEventsName] = useState();\n  const [date, setDate] = useState();\n  const [time, setTime] = useState();\n  const [origin, setOrigin] = useState();\n  const [description, setDescription] = useState();\n  const [state, setState] = React.useState({\n    directions: null\n  });\n  /*\r\n    const handleChange = React.useCallback((e) => {\r\n      const value = e.target.value;\r\n      setState({\r\n          [e.target.name]: value\r\n      });\r\n      console.log(e.target.value)\r\n    })*/\n\n  const handleContinue = e => {\n    e.preventDefault();\n    console.log(\"entrei no continue\");\n    const request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"user\")\n      },\n      body: JSON.stringify({\n        eventsName: eventsName,\n        date: date,\n        origin: origin,\n        description: description,\n        time: time,\n        markers: markers.toString()\n      })\n    };\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request).then(response => {\n      console.log(request.headers);\n      console.log(\"mudei1\");\n      console.log(request.body);\n      console.log(response);\n\n      if (response.ok) {\n        console.log(\"Event successfully created!\");\n      } else {\n        console.log(\"Something went wrong.\");\n      }\n    }).catch(error => console.error('Error', error));\n  };\n\n  const [markers, setMarkers] = useState([]);\n  const [selected, setSelected] = useState([]);\n  var service = new google.maps.DirectionsService();\n  const onMapClick = React.useCallback(e => {\n    setMarkers(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    }]);\n  }, []);\n  const onMarkerClick = React.useCallback(e => {\n    setSelected(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng(),\n      active: true\n    }]);\n  }, []);\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    mapRef.current = map;\n  }, []);\n  const panTo = React.useCallback(({\n    lat,\n    lng\n  }) => {\n    mapRef.current.panTo({\n      lat,\n      lng\n    });\n    mapRef.current.setZoom(20);\n  }, []);\n  const {\n    ready,\n    value,\n    suggestions: {\n      status,\n      data\n    },\n    setValue,\n    clearSuggestions\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: {\n        lat: () => 38.660783,\n        lng: () => -9.205681\n      },\n      radius: 100 * 1000\n    }\n  });\n\n  const handleInput = e => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async address => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({\n        address\n      });\n      const {\n        lat,\n        lng\n      } = await getLatLng(results[0]);\n      panTo({\n        lat,\n        lng\n      });\n      setMarkers(current => [...current, {\n        lat: lat,\n        lng: lng\n      }]);\n      const waypoints = markers.map(p => ({\n        location: {\n          lat: p.lat,\n          lng: p.lng\n        },\n        stopover: true\n      }));\n\n      if (waypoints.length >= 2) {\n        const origin = waypoints[0].location;\n        const destination = waypoints.pop().location;\n        service.route({\n          origin: origin,\n          destination: destination,\n          travelMode: google.maps.TravelMode.WALKING,\n          waypoints: waypoints\n        }, (result, status) => {\n          if (status === google.maps.DirectionsStatus.OK) {\n            setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        });\n      }\n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  };\n\n  const onMarkerDragEnd = (e, index) => {\n    markers[index] = { ...markers[index],\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    };\n    const waypoints = markers.map(p => ({\n      location: {\n        lat: p.lat,\n        lng: p.lng\n      },\n      stopover: true\n    }));\n\n    if (waypoints.length >= 2) {\n      const origin = waypoints[0].location;\n      const destination = waypoints.pop().location;\n      service.route({\n        origin: origin,\n        destination: destination,\n        travelMode: google.maps.TravelMode.WALKING,\n        waypoints: waypoints\n      }, (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          setState({\n            directions: result\n          });\n        } else {\n          console.error(`error fetching directions ${result}`);\n        }\n      });\n    }\n  };\n  /* const onMarkerClick = (e,index) => { \r\n     console.log(index);\r\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\r\n     console.log(markers[index].active)\r\n   };*/\n\n\n  const onInfoClose = (e, index) => {\n    selected[index] = { ...selected[index],\n      lat: selected[index].lat,\n      lng: selected[index].lng,\n      active: false\n    };\n  }; //const origin = markers[0];\n  //const destination = markers[markers.length-1];\n\n\n  const waypoints = markers.map(p => ({\n    location: {\n      lat: p.lat,\n      lng: p.lng\n    },\n    stopover: true\n  }));\n\n  if (waypoints.length >= 2) {\n    const origin = waypoints[0].location;\n    const destination = waypoints.pop().location;\n    service.route({\n      origin: origin,\n      destination: destination,\n      travelMode: google.maps.TravelMode.WALKING,\n      waypoints: waypoints\n    }, (result, status) => {\n      if (status === google.maps.DirectionsStatus.OK) {\n        setState({\n          directions: result\n        });\n      } else {\n        console.error(`error fetching directions ${result}`);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(LocateMDBtn, {\n      children: /*#__PURE__*/_jsxDEV(LocateMBtn, {\n        className: \"locate\",\n        onClick: () => {\n          navigator.geolocation.getCurrentPosition(position => {\n            panTo({\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            });\n          }, () => null);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-compass fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"originImg\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-map-marker-alt fa-2x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"origin\",\n      children: /*#__PURE__*/_jsxDEV(Combobox, {\n        onSelect: handleSelect,\n        children: [/*#__PURE__*/_jsxDEV(ComboboxInput, {\n          value: value,\n          onChange: handleInput,\n          disabled: !ready,\n          placeholder: \"Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ComboboxPopover, {\n          children: /*#__PURE__*/_jsxDEV(ComboboxList, {\n            children: status === \"OK\" && data.map(({\n              id,\n              description\n            }) => /*#__PURE__*/_jsxDEV(ComboboxOption, {\n              value: description\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n      id: \"map\",\n      mapContainerStyle: mapContainerStyle,\n      zoom: 8,\n      center: center,\n      onClick: onMapClick,\n      onLoad: onMapLoad,\n      children: [markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: {\n          lat: marker.lat,\n          lng: marker.lng\n        },\n        draggable: true,\n        onDragEnd: e => onMarkerDragEnd(e, index),\n        onClick: e => onMarkerClick(e, index)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this)), selected.map((select, index) => select.active ? /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: select.lat,\n          lng: select.lng\n        },\n        onCloseClick: e => onInfoClose(e, index),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"bear\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-hands-helping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), \" \", \"Paragem na Rota\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Escolhido \", select.lat, \" , \", select.lng]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this) : null), \";\", /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n        directions: state.directions,\n        options: {\n          suppressMarkers: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"details\",\n      onSubmit: handleContinue,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nameImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Events Name\",\n          type: \"text\",\n          name: \"eventsName\",\n          noValidate: true,\n          onChange: e => setEventsName(e.target.value) // values = {values}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-hourglass-half fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Duration\",\n          type: \"text\",\n          name: \"time\",\n          noValidate: true,\n          onChange: e => setTime(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"OImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-dot-circle fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 31\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orig\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Location Beginning\",\n          type: \"text\",\n          name: \"origin\",\n          noValidate: true,\n          onChange: e => setOrigin(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Ocalendar\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-calendar-alt fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Date\",\n          type: \"date\",\n          name: \"date\",\n          noValidate: true,\n          onChange: e => setDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"DesImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-file-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textArea\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          placeholder: \"Event Descriprion\",\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MDBtn, {\n        children: /*#__PURE__*/_jsxDEV(MBtn, {\n          type: \"submit\",\n          children: \"Create Event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CreateEvents, \"z8sNon+gRoVfugBmtElmR93ct6A=\", false, function () {\n  return [usePlacesAutocomplete];\n});\n\n_c = CreateEvents;\n;\nexport default CreateEvents;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateEvents\");","map":{"version":3,"sources":["C:/Users/mifer/Desktop/Fight4Change_Alfa/web/src/Components/Maps/Details.js"],"names":["React","useState","MDBtn","MBtn","GoogleMap","Marker","InfoWindow","DirectionsRenderer","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","LocateMDBtn","LocateMBtn","mapContainerStyle","height","width","center","lat","lng","CreateEvents","eventsName","setEventsName","date","setDate","time","setTime","origin","setOrigin","description","setDescription","state","setState","directions","handleContinue","e","preventDefault","console","log","request","method","headers","localStorage","getItem","body","JSON","stringify","markers","toString","fetch","then","response","ok","catch","error","setMarkers","selected","setSelected","service","google","maps","DirectionsService","onMapClick","useCallback","current","latLng","onMarkerClick","active","mapRef","useRef","onMapLoad","map","panTo","setZoom","ready","value","suggestions","status","data","setValue","clearSuggestions","requestOptions","location","radius","handleInput","target","handleSelect","address","results","waypoints","p","stopover","length","destination","pop","route","travelMode","TravelMode","WALKING","result","DirectionsStatus","OK","onMarkerDragEnd","index","onInfoClose","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","id","marker","select","suppressMarkers"],"mappings":"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","sourcesContent":["/*global google*/\r\nimport React,{useState} from 'react'\r\nimport \"./map.css\";\r\nimport { MDBtn, MBtn } from './Button'\r\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\r\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\r\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\r\nimport \"@reach/combobox/styles.css\";\r\nimport { LocateMDBtn, LocateMBtn } from './LocateButton'\r\n\r\n\r\n\r\nconst mapContainerStyle = {\r\n  height: \"80vh\",\r\n  width: \"50%\",\r\n};\r\n\r\nconst center = {\r\n  lat: 38.660783,\r\n  lng: -9.205681,\r\n};\r\n\r\n\r\nfunction CreateEvents() {\r\n\r\n\r\n const[eventsName, setEventsName] = useState();\r\n const[date, setDate] = useState();\r\n const[time, setTime] = useState();\r\n const[origin, setOrigin] = useState();\r\n const[description, setDescription] = useState();\r\n \r\n\r\n  const [state, setState] = React.useState({directions:null});\r\n\r\n/*\r\n  const handleChange = React.useCallback((e) => {\r\n    const value = e.target.value;\r\n    setState({\r\n        [e.target.name]: value\r\n    });\r\n    console.log(e.target.value)\r\n  })*/\r\n\r\n\r\n\r\n  const handleContinue = e => {\r\n    e.preventDefault();\r\n    console.log(\"entrei no continue\")\r\n\r\n    const request = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': 'Bearer ' + localStorage.getItem(\"user\") \r\n      },\r\n      body: JSON.stringify({\r\n        eventsName: eventsName,\r\n        date:date,\r\n        origin: origin,\r\n        description:description,\r\n        time: time,\r\n        markers:markers.toString(),\r\n      })\r\n    };\r\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request)\r\n    .then( response => {\r\n     \r\n        console.log(request.headers)\r\n        console.log(\"mudei1\")\r\n        console.log(request.body)\r\n        console.log(response)\r\n        if (response.ok) {\r\n          console.log(\"Event successfully created!\")\r\n        }\r\n        else {\r\n          console.log(\"Something went wrong.\")\r\n\r\n        }\r\n      }).catch(error => console.error('Error', error))\r\n  };\r\n\r\n\r\n\r\n\r\n  const [markers, setMarkers] = useState([]);\r\n  const [selected, setSelected] = useState([]);\r\n  var service = new google.maps.DirectionsService();\r\n\r\n  \r\n\r\n  const onMapClick = React.useCallback((e) => {\r\n    setMarkers((current) => [\r\n      ...current,\r\n      {\r\n        lat: e.latLng.lat(),\r\n        lng: e.latLng.lng(),\r\n\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  const onMarkerClick = React.useCallback((e) => {\r\n    setSelected((current) => [\r\n      ...current, {\r\n\r\n        lat: e.latLng.lat(),\r\n        lng: e.latLng.lng(),\r\n        active: true,\r\n      }\r\n    ])\r\n\r\n\r\n  },[])\r\n\r\n\r\n  const mapRef = React.useRef();\r\n  const onMapLoad = React.useCallback((map) => {\r\n    mapRef.current = map;\r\n  }, []);\r\n\r\n  const panTo = React.useCallback(({ lat, lng }) => {\r\n    mapRef.current.panTo({ lat, lng });\r\n    mapRef.current.setZoom(20);\r\n  }, []);\r\n\r\n  const {\r\n    ready,\r\n    value,\r\n    suggestions: { status, data },\r\n    setValue,\r\n    clearSuggestions,\r\n  } = usePlacesAutocomplete({\r\n    requestOptions: {\r\n      location: { lat: () => 38.660783, lng: () => -9.205681 },\r\n      radius: 100 * 1000,\r\n    },\r\n  });\r\n\r\n  const handleInput = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const handleSelect = async (address) => {\r\n    setValue(address, false);\r\n    clearSuggestions();\r\n\r\n    try {\r\n      const results = await getGeocode({ address });\r\n      \r\n      const { lat, lng } = await getLatLng(results[0]);\r\n      panTo({ lat, lng });\r\n      setMarkers((current) => [\r\n        ...current,\r\n        {\r\n          lat: lat,\r\n          lng: lng,\r\n\r\n        },\r\n      ]);\r\n      const waypoints = markers.map(p => ({\r\n        location: { lat: p.lat, lng: p.lng },\r\n        stopover: true\r\n      }))\r\n    \r\n      \r\n      if (waypoints.length >= 2) {\r\n        const origin = waypoints[0].location;\r\n        const destination = waypoints.pop().location;\r\n        \r\n    \r\n        service.route(\r\n    \r\n          {\r\n            origin: origin,\r\n            destination: destination,\r\n            travelMode: google.maps.TravelMode.WALKING,\r\n            waypoints: waypoints\r\n          },\r\n          (result, status) => {\r\n            if (status === google.maps.DirectionsStatus.OK) {\r\n              setState({\r\n                directions: result\r\n              }); \r\n            } else {\r\n              console.error(`error fetching directions ${result}`);\r\n            }\r\n          }\r\n    \r\n        )\r\n      }\r\n     \r\n    } catch (error) {\r\n      console.log(\"Error: \", error);\r\n    }\r\n  };\r\n\r\n  const onMarkerDragEnd = (e, index) => {\r\n   \r\n    markers[index] = { ...markers[index], lat: e.latLng.lat(), lng: e.latLng.lng() }\r\n\r\n    const waypoints = markers.map(p => ({\r\n      location: { lat: p.lat, lng: p.lng },\r\n      stopover: true\r\n    }))\r\n  \r\n    \r\n    if (waypoints.length >= 2) {\r\n      const origin = waypoints[0].location;\r\n      const destination = waypoints.pop().location;\r\n      service.route(\r\n        {\r\n          origin: origin,\r\n          destination: destination,\r\n          travelMode: google.maps.TravelMode.WALKING,\r\n          waypoints: waypoints\r\n        },\r\n        (result, status) => {\r\n          if (status === google.maps.DirectionsStatus.OK) {\r\n            \r\n            setState({\r\n              directions: result\r\n            });\r\n          } else {\r\n            console.error(`error fetching directions ${result}`);\r\n          }\r\n        }\r\n  \r\n      )\r\n    }\r\n  \r\n\r\n\r\n  };\r\n  /* const onMarkerClick = (e,index) => { \r\n     console.log(index);\r\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\r\n     console.log(markers[index].active)\r\n   };*/\r\n  const onInfoClose = (e, index) => {\r\n    selected[index] = { ...selected[index], lat: selected[index].lat, lng: selected[index].lng, active: false }\r\n  }\r\n\r\n  \r\n\r\n\r\n  //const origin = markers[0];\r\n  //const destination = markers[markers.length-1];\r\n\r\n\r\n  const waypoints = markers.map(p => ({\r\n    location: { lat: p.lat, lng: p.lng },\r\n    stopover: true\r\n  }))\r\n\r\n \r\n  if (waypoints.length >= 2) {\r\n    const origin = waypoints[0].location;\r\n    const destination = waypoints.pop().location;\r\n\r\n    service.route(\r\n\r\n      {\r\n        origin: origin,\r\n        destination: destination,\r\n        travelMode: google.maps.TravelMode.WALKING,\r\n        waypoints: waypoints\r\n      },\r\n      (result, status) => {\r\n        if (status === google.maps.DirectionsStatus.OK) {\r\n          \r\n          setState({\r\n            directions: result\r\n          });\r\n        } else {\r\n          console.error(`error fetching directions ${result}`);\r\n        }\r\n      }\r\n\r\n    )\r\n  }\r\n\r\n  return (\r\n\r\n    <>\r\n      <LocateMDBtn>\r\n        <LocateMBtn\r\n          className=\"locate\"\r\n          onClick={() => {\r\n            navigator.geolocation.getCurrentPosition(\r\n              (position) => {\r\n                panTo({\r\n                  lat: position.coords.latitude,\r\n                  lng: position.coords.longitude,\r\n                });\r\n              },\r\n              () => null\r\n            );\r\n          }}\r\n        >\r\n          <i className=\"far fa-compass fa-2x\"></i>\r\n        </LocateMBtn>\r\n      </LocateMDBtn>\r\n\r\n\r\n      <div className=\"originImg\"><i className=\"fas fa-map-marker-alt fa-2x\"></i></div>\r\n      <div className=\"origin\">\r\n        <Combobox onSelect={handleSelect}>\r\n          <ComboboxInput\r\n            value={value}\r\n            onChange={handleInput}\r\n            disabled={!ready}\r\n            placeholder=\"Location\"\r\n          />\r\n          <ComboboxPopover>\r\n            <ComboboxList>\r\n              {status === \"OK\" &&\r\n                data.map(({ id, description }) => (\r\n                  <ComboboxOption key={id} value={description} />\r\n                ))}\r\n            </ComboboxList>\r\n          </ComboboxPopover>\r\n        </Combobox>\r\n\r\n      </div>\r\n\r\n\r\n      <GoogleMap\r\n        id=\"map\"\r\n        mapContainerStyle={mapContainerStyle}\r\n        zoom={8}\r\n        center={center}\r\n        onClick={onMapClick}\r\n        onLoad={onMapLoad}\r\n      >\r\n\r\n        {markers.map((marker, index) => (\r\n          <Marker\r\n            key={index}\r\n            position={{ lat: marker.lat, lng: marker.lng }}\r\n            draggable={true}\r\n            onDragEnd={(e) => onMarkerDragEnd(e, index)}\r\n            onClick={(e) => onMarkerClick(e, index)}\r\n          />\r\n        ))}\r\n\r\n        {selected.map((select, index) => (select.active ? (\r\n\r\n          <InfoWindow\r\n            position={{ lat: select.lat, lng: select.lng }}\r\n            onCloseClick={(e) => onInfoClose(e, index)}\r\n          >\r\n            <div>\r\n              <h2>\r\n                <span role=\"img\" aria-label=\"bear\">\r\n                  <i className=\"fas fa-hands-helping\"></i>\r\n                </span>{\" \"}\r\n                Paragem na Rota\r\n              </h2>\r\n              <p>Escolhido {select.lat} , {select.lng}</p>\r\n            </div>\r\n          </InfoWindow>\r\n        ) : null))};\r\n            \r\n            <DirectionsRenderer directions={state.directions}  options={{\r\n           \r\n              suppressMarkers: true\r\n    \r\n            }} ></DirectionsRenderer>\r\n            \r\n         \r\n\r\n\r\n\r\n      </GoogleMap>\r\n\r\n\r\n\r\n\r\n      <form className=\"details\" onSubmit={handleContinue}>\r\n        <div className=\"nameImg\"><i className=\"fas fa-signature fa-2x\"></i></div>\r\n        <div className=\"name\">\r\n          <input\r\n            placeholder=\"Events Name\"\r\n            type=\"text\"\r\n            name=\"eventsName\"\r\n            noValidate\r\n            onChange={e=>setEventsName(e.target.value)}\r\n          // values = {values}\r\n          />\r\n        </div>\r\n        <div className=\"timeImg\"><i className=\"fas fa-hourglass-half fa-2x\"></i></div>\r\n        <div className=\"time\">\r\n          <input\r\n            placeholder=\"Duration\"\r\n            type=\"text\"\r\n            name=\"time\"\r\n            noValidate\r\n            onChange={e => setTime(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"OImg\"><i className=\"far fa-dot-circle fa-2x\"></i></div>\r\n        <div className=\"orig\">\r\n          <input\r\n            placeholder=\"Event Location Beginning\"\r\n            type=\"text\"\r\n            name=\"origin\"\r\n            noValidate\r\n            onChange={e => setOrigin(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"Ocalendar\"><i className=\"far fa-calendar-alt fa-2x\"></i></div>\r\n        <div className=\"date\">\r\n          <input\r\n            placeholder=\"Event Date\"\r\n            type=\"date\"\r\n            name=\"date\"\r\n            noValidate\r\n            onChange={e => setDate(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"DesImg\"><i className=\"fas fa-file-signature fa-2x\" ></i></div>\r\n        <div className=\"textArea\">\r\n          <textarea\r\n            name=\"description\"\r\n            placeholder=\"Event Descriprion\"\r\n            onChange={e => setDescription(e.target.value)}\r\n\r\n          /></div>\r\n        <MDBtn>\r\n          <MBtn type='submit'>Create Event</MBtn>\r\n        </MDBtn>\r\n      </form>\r\n\r\n    </>\r\n  )\r\n};\r\n\r\nexport default CreateEvents\r\n\r\n"]},"metadata":{},"sourceType":"module"}