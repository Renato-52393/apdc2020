{"ast":null,"code":"import { forwardRef, useRef, createElement, useContext, useCallback, useEffect, useMemo, Fragment, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\nimport { createNamedContext } from '@reach/utils/context';\nimport { isFunction } from '@reach/utils/type-check';\nimport { makeId } from '@reach/utils/make-id';\nimport { noop } from '@reach/utils/noop';\nimport { useCheckStyles } from '@reach/utils/dev-utils';\nimport { useComposedRefs } from '@reach/utils/compose-refs';\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\nimport { useId } from '@reach/auto-id';\nimport { Popover, positionMatchWidth } from '@reach/popover';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n} // Forked from https://github.com/bvaughn/highlight-words-core\n\n/**\r\n * Creates an array of chunk objects representing both higlightable and non\r\n * highlightable pieces of text that match each search word.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\n\n\nfunction findAll(_ref) {\n  var autoEscape = _ref.autoEscape,\n      _ref$caseSensitive = _ref.caseSensitive,\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n      _ref$findChunks = _ref.findChunks,\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\n      sanitize = _ref.sanitize,\n      searchWords = _ref.searchWords,\n      textToHighlight = _ref.textToHighlight;\n  return fillInChunks({\n    chunksToHighlight: combineChunks({\n      chunks: findChunks({\n        autoEscape: autoEscape,\n        caseSensitive: caseSensitive,\n        sanitize: sanitize,\n        searchWords: searchWords,\n        textToHighlight: textToHighlight\n      })\n    }),\n    totalLength: textToHighlight ? textToHighlight.length : 0\n  });\n}\n/**\r\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\r\n * single chunks.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\n\n\nfunction combineChunks(_ref2) {\n  var chunks = _ref2.chunks;\n  return chunks.sort(function (first, second) {\n    return first.start - second.start;\n  }).reduce(function (processedChunks, nextChunk) {\n    // First chunk just goes straight in the array...\n    if (processedChunks.length === 0) {\n      return [nextChunk];\n    } else {\n      // ... subsequent chunks get checked to see if they overlap...\n      var prevChunk = processedChunks.pop();\n\n      if (nextChunk.start <= prevChunk.end) {\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n        // largest of the end indeces.\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n        processedChunks.push({\n          highlight: false,\n          start: prevChunk.start,\n          end: endIndex\n        });\n      } else {\n        processedChunks.push(prevChunk, nextChunk);\n      }\n\n      return processedChunks;\n    }\n  }, []);\n}\n/**\r\n * Examine text for any matches. If we find matches, add them to the returned\r\n * array as a \"chunk\" object.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\n\n\nfunction defaultFindChunks(_ref3) {\n  var autoEscape = _ref3.autoEscape,\n      caseSensitive = _ref3.caseSensitive,\n      _ref3$sanitize = _ref3.sanitize,\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\n      searchWords = _ref3.searchWords,\n      textToHighlight = _ref3.textToHighlight;\n  textToHighlight = sanitize(textToHighlight || \"\");\n  return searchWords.filter(function (searchWord) {\n    return searchWord;\n  }) // Remove empty words\n  .reduce(function (chunks, searchWord) {\n    searchWord = sanitize(searchWord);\n\n    if (autoEscape) {\n      searchWord = escapeRegExpFn(searchWord);\n    }\n\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\n    var match;\n\n    while (match = regex.exec(textToHighlight || \"\")) {\n      var start = match.index;\n      var end = regex.lastIndex; // We do not return zero-length matches\n\n      if (end > start) {\n        chunks.push({\n          highlight: false,\n          start: start,\n          end: end\n        });\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\n\n      if (match.index === regex.lastIndex) {\n        regex.lastIndex++;\n      }\n    }\n\n    return chunks;\n  }, []);\n}\n/**\r\n * Given a set of chunks to highlight, create an additional set of chunks\r\n * to represent the bits of text between the highlighted text.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\n\n\nfunction fillInChunks(_ref4) {\n  var chunksToHighlight = _ref4.chunksToHighlight,\n      totalLength = _ref4.totalLength;\n  var allChunks = [];\n\n  if (chunksToHighlight.length === 0) {\n    append(0, totalLength, false);\n  } else {\n    var lastIndex = 0;\n    chunksToHighlight.forEach(function (chunk) {\n      append(lastIndex, chunk.start, false);\n      append(chunk.start, chunk.end, true);\n      lastIndex = chunk.end;\n    });\n    append(lastIndex, totalLength, false);\n  }\n\n  return allChunks;\n\n  function append(start, end, highlight) {\n    if (end - start > 0) {\n      allChunks.push({\n        start: start,\n        end: end,\n        highlight: highlight\n      });\n    }\n  }\n}\n\nfunction defaultSanitize(string) {\n  return string;\n}\n\nfunction escapeRegExpFn(string) {\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\nvar HighlightWords = {\n  combineChunks: combineChunks,\n  fillInChunks: fillInChunks,\n  findAll: findAll,\n  findChunks: defaultFindChunks\n};\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\n    _excluded4 = [\"persistSelection\", \"as\"],\n    _excluded5 = [\"as\", \"children\", \"value\", \"onClick\"],\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\n\nvar _on, _on2, _on3, _on4, _states; ////////////////////////////////////////////////////////////////////////////////\n// States\n// Nothing going on, waiting for the user to type or use the arrow keys\n\n\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\n\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\n\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\n// are not ComboboxInputs\n\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\n// Events\n// User cleared the value w/ backspace, but input still has focus\n\nvar CLEAR = \"CLEAR\"; // User is typing\n\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\n// Prevents initial change from sending the user to the NAVIGATING state\n// https://github.com/reach/reach-ui/issues/464\n\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\n\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\n// value from the click, not the current nav item\n\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\n\nvar ESCAPE = \"ESCAPE\";\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\n\nvar INTERACT = \"INTERACT\";\nvar FOCUS = \"FOCUS\";\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar stateChart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\n  }, _states[SUGGESTING] = {\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\n  }, _states[NAVIGATING] = {\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\n  }, _states[INTERACTING] = {\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\n  }, _states)\n};\n\nvar reducer = function reducer(data, event) {\n  var nextState = _extends({}, data, {\n    lastEventType: event.type\n  });\n\n  switch (event.type) {\n    case CHANGE:\n    case INITIAL_CHANGE:\n      return _extends({}, nextState, {\n        navigationValue: null,\n        value: event.value\n      });\n\n    case NAVIGATE:\n    case OPEN_WITH_BUTTON:\n    case OPEN_WITH_INPUT_CLICK:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    case CLEAR:\n      return _extends({}, nextState, {\n        value: \"\",\n        navigationValue: null\n      });\n\n    case BLUR:\n    case ESCAPE:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case SELECT_WITH_CLICK:\n      return _extends({}, nextState, {\n        value: event.value,\n        navigationValue: null\n      });\n\n    case SELECT_WITH_KEYBOARD:\n      return _extends({}, nextState, {\n        value: data.navigationValue,\n        navigationValue: null\n      });\n\n    case CLOSE_WITH_BUTTON:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case INTERACT:\n      return nextState;\n\n    case FOCUS:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    default:\n      return nextState;\n  }\n};\n\nfunction popoverIsExpanded(state) {\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\n}\n/**\r\n * When we open a list, set the navigation value to the value in the input, if\r\n * it's in the list, then it'll automatically be highlighted.\r\n *\r\n * @param stateData\r\n * @param event\r\n */\n\n\nfunction findNavigationValue(stateData, event) {\n  // @ts-ignore\n  if (event.value) {\n    // @ts-ignore\n    return event.value; // @ts-ignore\n  } else if (event.persistSelection) {\n    return stateData.value;\n  } else {\n    return null;\n  }\n}\n\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\n// can work it's highlight text magic no matter what else is rendered around\n// it.\n\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * Combobox\r\n *\r\n * @see Docs https://reach.tech/combobox#combobox\r\n */\n\nvar Combobox = /*#__PURE__*/forwardRef(function Combobox(_ref, forwardedRef) {\n  var _data$navigationValue;\n\n  var onSelect = _ref.onSelect,\n      _ref$openOnFocus = _ref.openOnFocus,\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\n      ariaLabel = _ref[\"aria-label\"],\n      ariaLabelledby = _ref[\"aria-labelledby\"],\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useDescendantsInit = useDescendantsInit(),\n      options = _useDescendantsInit[0],\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\n\n\n  var inputRef = useRef();\n  var popoverRef = useRef();\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\n  // the user's value while navigating (because it's always the user's value),\n  // but we need to know this in useKeyDown which is far away from the prop\n  // here, so we do something sneaky and write it to this ref on context so we\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\n  // about this one too!\n\n  var autocompletePropRef = useRef(false);\n  var persistSelectionRef = useRef(false);\n  var defaultData = {\n    // The value the user has typed. We derive this also when the developer is\n    // controlling the value of ComboboxInput.\n    value: \"\",\n    // the value the user has navigated to with the keyboard\n    navigationValue: null\n  };\n\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\n      state = _useReducerMachine[0],\n      data = _useReducerMachine[1],\n      transition = _useReducerMachine[2];\n\n  useFocusManagement(data.lastEventType, inputRef);\n  var id = useId(props.id);\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\n  var context = {\n    ariaLabel: ariaLabel,\n    ariaLabelledby: ariaLabelledby,\n    autocompletePropRef: autocompletePropRef,\n    buttonRef: buttonRef,\n    comboboxId: id,\n    data: data,\n    inputRef: inputRef,\n    isExpanded: popoverIsExpanded(state),\n    listboxId: listboxId,\n    onSelect: onSelect || noop,\n    openOnFocus: openOnFocus,\n    persistSelectionRef: persistSelectionRef,\n    popoverRef: popoverRef,\n    state: state,\n    transition: transition\n  };\n  useCheckStyles(\"combobox\");\n  return /*#__PURE__*/createElement(DescendantProvider, {\n    context: ComboboxDescendantContext,\n    items: options,\n    set: setOptions\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\n    value: context\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\n    \"data-reach-combobox\": \"\",\n    \"data-state\": getDataState(state),\n    ref: forwardedRef\n  }), isFunction(children) ? children({\n    id: id,\n    isExpanded: popoverIsExpanded(state),\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\n    state: state\n  }) : children)));\n});\n/**\r\n * @see Docs https://reach.tech/combobox#combobox-props\r\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  Combobox.displayName = \"Combobox\";\n  Combobox.propTypes = {\n    as: PropTypes.any,\n    onSelect: PropTypes.func,\n    openOnFocus: PropTypes.bool\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxInput\r\n *\r\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxinput\r\n */\n\n\nvar ComboboxInput = /*#__PURE__*/forwardRef(function ComboboxInput(_ref2, forwardedRef) {\n  var _ref2$as = _ref2.as,\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\n      _ref2$selectOnClick = _ref2.selectOnClick,\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\n      _ref2$autocomplete = _ref2.autocomplete,\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\n      onClick = _ref2.onClick,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onBlur = _ref2.onBlur,\n      onFocus = _ref2.onFocus,\n      controlledValue = _ref2.value,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2); // https://github.com/reach/reach-ui/issues/464\n\n\n  var _React$useRef = useRef(controlledValue),\n      initialControlledValue = _React$useRef.current;\n\n  var controlledValueChangedRef = useRef(false);\n  useUpdateEffect(function () {\n    controlledValueChangedRef.current = true;\n  }, [controlledValue]);\n\n  var _React$useContext = useContext(ComboboxContext),\n      _React$useContext$dat = _React$useContext.data,\n      navigationValue = _React$useContext$dat.navigationValue,\n      value = _React$useContext$dat.value,\n      lastEventType = _React$useContext$dat.lastEventType,\n      inputRef = _React$useContext.inputRef,\n      state = _React$useContext.state,\n      transition = _React$useContext.transition,\n      listboxId = _React$useContext.listboxId,\n      autocompletePropRef = _React$useContext.autocompletePropRef,\n      openOnFocus = _React$useContext.openOnFocus,\n      isExpanded = _React$useContext.isExpanded,\n      ariaLabel = _React$useContext.ariaLabel,\n      ariaLabelledby = _React$useContext.ariaLabelledby,\n      persistSelectionRef = _React$useContext.persistSelectionRef;\n\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\n  // caused by clicking inside the list, and if so, don't close the List.\n\n  var selectOnClickRef = useRef(false);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var isControlled = controlledValue != null; // Layout effect should be SSR-safe here because we don't actually do\n  // anything with this ref that involves rendering until after we've\n  // let the client hydrate in nested components.\n\n  useIsomorphicLayoutEffect(function () {\n    autocompletePropRef.current = autocomplete;\n  }, [autocomplete, autocompletePropRef]);\n  var handleValueChange = useCallback(function (value) {\n    if (value.trim() === \"\") {\n      transition(CLEAR);\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\n      transition(INITIAL_CHANGE, {\n        value: value\n      });\n    } else {\n      transition(CHANGE, {\n        value: value\n      });\n    }\n  }, [initialControlledValue, transition]);\n  useEffect(function () {\n    // If they are controlling the value we still need to do our transitions,\n    // so  we have this derived state to emulate onChange of the input as we\n    // receive new `value`s ...[*]\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\n      handleValueChange(controlledValue);\n    }\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\n  // user types, instead the developer controls it with the normal input\n  // onChange prop\n\n  function handleChange(event) {\n    var value = event.target.value;\n\n    if (!isControlled) {\n      handleValueChange(value);\n    }\n  }\n\n  function handleFocus() {\n    if (selectOnClick) {\n      selectOnClickRef.current = true;\n    } // If we select an option with click, useFocusManagement will focus the\n    // input, in those cases we don't want to cause the menu to open back up,\n    // so we guard behind these states.\n\n\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\n      transition(FOCUS, {\n        persistSelection: persistSelectionRef.current\n      });\n    }\n  }\n\n  function handleClick() {\n    if (selectOnClickRef.current) {\n      var _inputRef$current;\n\n      selectOnClickRef.current = false;\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\n    }\n\n    if (openOnFocus && state === IDLE) {\n      transition(OPEN_WITH_INPUT_CLICK);\n    }\n  }\n\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\n  navigationValue || controlledValue || value : controlledValue || value;\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\n    \"aria-autocomplete\": \"both\",\n    \"aria-controls\": listboxId,\n    \"aria-expanded\": isExpanded,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\n    role: \"combobox\"\n  }, props, {\n    \"data-reach-combobox-input\": \"\",\n    \"data-state\": getDataState(state),\n    ref: ref,\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    onChange: composeEventHandlers(onChange, handleChange),\n    onClick: composeEventHandlers(onClick, handleClick),\n    onFocus: composeEventHandlers(onFocus, handleFocus),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    value: inputValue || \"\"\n  }));\n});\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxinput-props\r\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxInput.displayName = \"ComboboxInput\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxPopover\r\n *\r\n * Contains the popup that renders the list. Because some UI needs to render\r\n * more than the list in the popup, you need to render one of these around the\r\n * list. For example, maybe you want to render the number of results suggested.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxpopover\r\n */\n\n\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function ComboboxPopover(_ref3, forwardedRef) {\n  var _ref3$as = _ref3.as,\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\n      children = _ref3.children,\n      _ref3$portal = _ref3.portal,\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\n      onKeyDown = _ref3.onKeyDown,\n      onBlur = _ref3.onBlur,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  var _React$useContext2 = useContext(ComboboxContext),\n      popoverRef = _React$useContext2.popoverRef,\n      inputRef = _React$useContext2.inputRef,\n      isExpanded = _React$useContext2.isExpanded,\n      state = _React$useContext2.state;\n\n  var ref = useComposedRefs(popoverRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var sharedProps = {\n    \"data-reach-combobox-popover\": \"\",\n    \"data-state\": getDataState(state),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    // Instead of conditionally rendering the popover we use the `hidden` prop\n    // because we don't want to unmount on close (from escape or onSelect).\n    // However, the developer can conditionally render the ComboboxPopover if\n    // they do want to cause mount/unmount based on the app's own data (like\n    // results.length or whatever).\n    hidden: !isExpanded,\n    tabIndex: -1,\n    children: children\n  };\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\n    as: Comp\n  }, props, {\n    ref: ref,\n    position: position,\n    targetRef: inputRef\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\n    ref: ref\n  }, props, sharedProps));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxPopover.displayName = \"ComboboxPopover\";\n}\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\r\n */\n////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxList\r\n *\r\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\r\n * for the list.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxlist\r\n */\n\n\nvar ComboboxList = /*#__PURE__*/forwardRef(function ComboboxList(_ref4, forwardedRef) {\n  var _ref4$persistSelectio = _ref4.persistSelection,\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\n      _ref4$as = _ref4.as,\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\n\n  var _React$useContext3 = useContext(ComboboxContext),\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\n      listboxId = _React$useContext3.listboxId;\n\n  if (persistSelection) {\n    persistSelectionRef.current = true;\n  }\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    role: \"listbox\"\n  }, props, {\n    ref: forwardedRef,\n    \"data-reach-combobox-list\": \"\",\n    id: listboxId\n  }));\n});\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxlist-props\r\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxList.displayName = \"ComboboxList\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxOption\r\n *\r\n * An option that is suggested to the user as they interact with the combobox.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxoption\r\n */\n\n\nvar ComboboxOption = /*#__PURE__*/forwardRef(function ComboboxOption(_ref5, forwardedRef) {\n  var _ref5$as = _ref5.as,\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\n      children = _ref5.children,\n      value = _ref5.value,\n      onClick = _ref5.onClick,\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\n\n  var _React$useContext4 = useContext(ComboboxContext),\n      onSelect = _React$useContext4.onSelect,\n      navigationValue = _React$useContext4.data.navigationValue,\n      transition = _React$useContext4.transition;\n\n  var ownRef = useRef(null);\n  var ref = useComposedRefs(forwardedRef, ownRef);\n  var index = useDescendant({\n    element: ownRef.current,\n    value: value\n  }, ComboboxDescendantContext);\n  var isActive = navigationValue === value;\n\n  var handleClick = function handleClick() {\n    onSelect && onSelect(value);\n    transition(SELECT_WITH_CLICK, {\n      value: value\n    });\n  };\n\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\n    value: {\n      value: value,\n      index: index\n    }\n  }, /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-selected\": isActive,\n    role: \"option\"\n  }, props, {\n    \"data-reach-combobox-option\": \"\",\n    ref: ref,\n    id: String(makeHash(value)),\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\n    // element can be `document.activeElement` and then our focus checks in\n    // onBlur will work as intended\n    ,\n    tabIndex: -1,\n    onClick: composeEventHandlers(onClick, handleClick)\n  }), children ? isFunction(children) ? children({\n    value: value,\n    index: index\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\n});\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxoption-props\r\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOption.displayName = \"ComboboxOption\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxOptionText\r\n *\r\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\r\n * matching and non-matching segments of text.\r\n *\r\n * We don't forwardRef or spread props because we render multiple spans or null,\r\n * should be fine 🤙\r\n *\r\n * @example\r\n *   <ComboboxOption value=\"Seattle\">\r\n *     🌧 <ComboboxOptionText />\r\n *   </ComboboxOption>\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\r\n */\n\n\nfunction ComboboxOptionText() {\n  var _React$useContext5 = useContext(OptionContext),\n      value = _React$useContext5.value;\n\n  var _React$useContext6 = useContext(ComboboxContext),\n      contextValue = _React$useContext6.data.value;\n\n  var results = useMemo(function () {\n    return HighlightWords.findAll({\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\n      textToHighlight: value\n    });\n  }, [contextValue, value]);\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\n    var str = value.slice(result.start, result.end);\n    return /*#__PURE__*/createElement(\"span\", {\n      key: index,\n      \"data-reach-combobox-option-text\": \"\",\n      \"data-user-value\": result.highlight ? true : undefined,\n      \"data-suggested-value\": result.highlight ? undefined : true\n    }, str);\n  }) : value);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * ComboboxButton\r\n */\n\n\nvar ComboboxButton = /*#__PURE__*/forwardRef(function ComboboxButton(_ref6, forwardedRef) {\n  var _ref6$as = _ref6.as,\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\n      onClick = _ref6.onClick,\n      onKeyDown = _ref6.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\n\n  var _React$useContext7 = useContext(ComboboxContext),\n      transition = _React$useContext7.transition,\n      state = _React$useContext7.state,\n      buttonRef = _React$useContext7.buttonRef,\n      listboxId = _React$useContext7.listboxId,\n      isExpanded = _React$useContext7.isExpanded;\n\n  var ref = useComposedRefs(buttonRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n\n  var handleClick = function handleClick() {\n    if (state === IDLE) {\n      transition(OPEN_WITH_BUTTON);\n    } else {\n      transition(CLOSE_WITH_BUTTON);\n    }\n  };\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-controls\": listboxId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-expanded\": isExpanded\n  }, props, {\n    \"data-reach-combobox-button\": \"\",\n    ref: ref,\n    onClick: composeEventHandlers(onClick, handleClick),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\n  }));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxButton.displayName = \"ComboboxButton\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\r\n * Move focus back to the input if we start navigating w/ the\r\n * keyboard after focus has moved to any focusable content in\r\n * the popup.\r\n *\r\n * @param lastEventType\r\n * @param inputRef\r\n */\n\n\nfunction useFocusManagement(lastEventType, inputRef) {\n  // useLayoutEffect so that the cursor goes to the end of the input instead\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\n  //\n  // Should be safe to use here since we're just focusing an input.\n  useIsomorphicLayoutEffect(function () {\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\n    }\n  }, [inputRef, lastEventType]);\n}\n/**\r\n * We want the same events when the input or the popup have focus (HOW COOL ARE\r\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\r\n */\n\n\nfunction useKeyDown() {\n  var _React$useContext8 = useContext(ComboboxContext),\n      navigationValue = _React$useContext8.data.navigationValue,\n      onSelect = _React$useContext8.onSelect,\n      state = _React$useContext8.state,\n      transition = _React$useContext8.transition,\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\n      persistSelectionRef = _React$useContext8.persistSelectionRef;\n\n  var options = useDescendants(ComboboxDescendantContext);\n  return function handleKeyDown(event) {\n    var index = options.findIndex(function (_ref7) {\n      var value = _ref7.value;\n      return value === navigationValue;\n    });\n\n    function getNextOption() {\n      var atBottom = index === options.length - 1;\n\n      if (atBottom) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getFirstOption();\n        }\n      } else {\n        // Go to the next item in the list\n        return options[(index + 1) % options.length];\n      }\n    }\n\n    function getPreviousOption() {\n      var atTop = index === 0;\n\n      if (atTop) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getLastOption();\n        }\n      } else if (index === -1) {\n        // displaying the user's value, so go select the last one\n        return getLastOption();\n      } else {\n        // normal case, select previous\n        return options[(index - 1 + options.length) % options.length];\n      }\n    }\n\n    function getFirstOption() {\n      return options[0];\n    }\n\n    function getLastOption() {\n      return options[options.length - 1];\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || !options.length) {\n          return;\n        }\n\n        if (state === IDLE) {\n          // Opening a closed list\n          transition(NAVIGATE, {\n            persistSelection: persistSelectionRef.current\n          });\n        } else {\n          var next = getNextOption();\n          transition(NAVIGATE, {\n            value: next ? next.value : null\n          });\n        }\n\n        break;\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\n\n      case \"ArrowUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          var prev = getPreviousOption();\n          transition(NAVIGATE, {\n            value: prev ? prev.value : null\n          });\n        }\n\n        break;\n\n      case \"Home\":\n      case \"PageUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getFirstOption().value\n          });\n        }\n\n        break;\n\n      case \"End\":\n      case \"PageDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getLastOption().value\n          });\n        }\n\n        break;\n\n      case \"Escape\":\n        if (state !== IDLE) {\n          transition(ESCAPE);\n        }\n\n        break;\n\n      case \"Enter\":\n        if (state === NAVIGATING && navigationValue !== null) {\n          // don't want to submit forms\n          event.preventDefault();\n          onSelect && onSelect(navigationValue);\n          transition(SELECT_WITH_KEYBOARD);\n        }\n\n        break;\n    }\n  };\n}\n\nfunction useBlur() {\n  var _React$useContext9 = useContext(ComboboxContext),\n      state = _React$useContext9.state,\n      transition = _React$useContext9.transition,\n      popoverRef = _React$useContext9.popoverRef,\n      inputRef = _React$useContext9.inputRef,\n      buttonRef = _React$useContext9.buttonRef;\n\n  return function handleBlur(event) {\n    var popover = popoverRef.current;\n    var input = inputRef.current;\n    var button = buttonRef.current;\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\n\n    if (activeElement !== input && activeElement !== button && popover) {\n      if (popover.contains(activeElement)) {\n        // focus landed inside the combobox, keep it open\n        if (state !== INTERACTING) {\n          transition(INTERACT);\n        }\n      } else {\n        // focus landed outside the combobox, close it.\n        transition(BLUR);\n      }\n    }\n  };\n}\n/**\r\n * This manages transitions between states with a built in reducer to manage\r\n * the data that goes with those transitions.\r\n *\r\n * @param chart\r\n * @param reducer\r\n * @param initialData\r\n */\n\n\nfunction useReducerMachine(chart, reducer, initialData) {\n  var _React$useState = useState(chart.initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var _React$useReducer = useReducer(reducer, initialData),\n      data = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var transition = function transition(event, payload) {\n    if (payload === void 0) {\n      payload = {};\n    }\n\n    var currentState = chart.states[state];\n    var nextState = currentState && currentState.on[event];\n\n    if (nextState) {\n      dispatch(_extends({\n        type: event,\n        state: state,\n        nextState: state\n      }, payload));\n      setState(nextState);\n      return;\n    }\n  };\n\n  return [state, data, transition];\n}\n/**\r\n * We don't want to track the active descendant with indexes because nothing is\r\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\r\n * ENTER. That only happens if you use the index as your data, rather than\r\n * *your data as your data*. We use this to generate a unique ID based on the\r\n * value of each item.  This function is short, sweet, and good enough™ (I also\r\n * don't know how it works, tbqh)\r\n *\r\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\r\n * @param str\r\n */\n\n\nfunction makeHash(str) {\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash = hash & hash;\n  }\n\n  return hash;\n} // function getActiveElement(node: Element | null | undefined) {\n//   let activeElement: Element | null = null;\n//   try {\n//     // If Element.getRootNode is supported, we'll retrieve either the root\n//     // Document or shadow root depending on where the component is rendered.\n//     // https://github.com/reach/reach-ui/issues/787\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\n//       .activeElement;\n//   } finally {\n//     return activeElement || (node?.ownerDocument || document).activeElement;\n//   }\n// }\n\n\nfunction getDataState(state) {\n  return state.toLowerCase();\n}\n/**\r\n * Escape regexp special characters in `str`\r\n *\r\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\r\n * @param str\r\n */\n\n\nfunction escapeRegexp(str) {\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\n} //////////////////////////\n//////////////////////////////////////////////////////\n\n/**\r\n * A hook that exposes data for a given `Combobox` component to its descendants.\r\n *\r\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\r\n */\n\n\nfunction useComboboxContext() {\n  var _React$useContext10 = useContext(ComboboxContext),\n      isExpanded = _React$useContext10.isExpanded,\n      comboboxId = _React$useContext10.comboboxId,\n      data = _React$useContext10.data,\n      state = _React$useContext10.state;\n\n  var navigationValue = data.navigationValue;\n  return useMemo(function () {\n    return {\n      id: comboboxId,\n      isExpanded: isExpanded,\n      navigationValue: navigationValue != null ? navigationValue : null,\n      state: state\n    };\n  }, [comboboxId, isExpanded, navigationValue, state]);\n}\n/**\r\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\r\n *\r\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\r\n */\n\n\nfunction useComboboxOptionContext() {\n  var _React$useContext11 = useContext(OptionContext),\n      value = _React$useContext11.value,\n      index = _React$useContext11.index;\n\n  return useMemo(function () {\n    return {\n      value: value,\n      index: index\n    };\n  }, [value, index]);\n} ////////////////////////////////////////////////////////////////////////////////\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\n// what the heck?). Have a great day :D\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\n\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useComboboxContext, useComboboxOptionContext };","map":{"version":3,"sources":["C:/Users/mifer/Desktop/Fight4Change_Alfa/web/node_modules/@reach/combobox/dist/reach-combobox.esm.js"],"names":["forwardRef","useRef","createElement","useContext","useCallback","useEffect","useMemo","Fragment","useState","useReducer","PropTypes","useIsomorphicLayoutEffect","createNamedContext","isFunction","makeId","noop","useCheckStyles","useComposedRefs","useUpdateEffect","composeEventHandlers","createDescendantContext","useDescendantsInit","DescendantProvider","useDescendant","useDescendants","useId","Popover","positionMatchWidth","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","findAll","_ref","autoEscape","_ref$caseSensitive","caseSensitive","_ref$findChunks","findChunks","defaultFindChunks","sanitize","searchWords","textToHighlight","fillInChunks","chunksToHighlight","combineChunks","chunks","totalLength","_ref2","sort","first","second","start","reduce","processedChunks","nextChunk","prevChunk","pop","end","endIndex","Math","max","push","highlight","_ref3","_ref3$sanitize","defaultSanitize","filter","searchWord","escapeRegExpFn","regex","RegExp","match","exec","index","lastIndex","_ref4","allChunks","append","forEach","chunk","string","replace","HighlightWords","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_on","_on2","_on3","_on4","_states","IDLE","SUGGESTING","NAVIGATING","INTERACTING","CLEAR","CHANGE","INITIAL_CHANGE","NAVIGATE","SELECT_WITH_KEYBOARD","SELECT_WITH_CLICK","ESCAPE","BLUR","INTERACT","FOCUS","OPEN_WITH_BUTTON","OPEN_WITH_INPUT_CLICK","CLOSE_WITH_BUTTON","stateChart","initial","states","on","reducer","data","event","nextState","lastEventType","type","navigationValue","value","findNavigationValue","popoverIsExpanded","state","includes","stateData","persistSelection","ComboboxDescendantContext","ComboboxContext","OptionContext","Combobox","forwardedRef","_data$navigationValue","onSelect","_ref$openOnFocus","openOnFocus","children","_ref$as","as","Comp","ariaLabel","ariaLabelledby","props","_useDescendantsInit","options","setOptions","inputRef","popoverRef","buttonRef","autocompletePropRef","persistSelectionRef","defaultData","_useReducerMachine","useReducerMachine","transition","useFocusManagement","id","listboxId","context","comboboxId","isExpanded","items","set","Provider","getDataState","ref","process","env","NODE_ENV","displayName","propTypes","any","func","bool","ComboboxInput","_ref2$as","_ref2$selectOnClick","selectOnClick","_ref2$autocomplete","autocomplete","onClick","onChange","onKeyDown","onBlur","onFocus","controlledValue","_React$useRef","initialControlledValue","current","controlledValueChangedRef","_React$useContext","_React$useContext$dat","selectOnClickRef","handleKeyDown","useKeyDown","handleBlur","useBlur","isControlled","handleValueChange","trim","handleChange","handleFocus","handleClick","_inputRef$current","select","inputValue","String","makeHash","undefined","role","ComboboxPopover","_ref3$as","_ref3$portal","portal","_ref3$position","position","_React$useContext2","sharedProps","hidden","tabIndex","targetRef","ComboboxList","_ref4$persistSelectio","_ref4$as","_React$useContext3","ComboboxOption","_ref5","_ref5$as","_React$useContext4","ownRef","element","isActive","ComboboxOptionText","_React$useContext5","_React$useContext6","contextValue","results","escapeRegexp","split","map","result","str","slice","ComboboxButton","_ref6","_ref6$as","_React$useContext7","_inputRef$current2","focus","_React$useContext8","findIndex","_ref7","getNextOption","atBottom","getFirstOption","getPreviousOption","atTop","getLastOption","preventDefault","next","prev","_React$useContext9","popover","input","button","activeElement","relatedTarget","contains","chart","initialData","_React$useState","setState","_React$useReducer","dispatch","payload","currentState","hash","_char","charCodeAt","toLowerCase","useComboboxContext","_React$useContext10","useComboboxOptionContext","_React$useContext11"],"mappings":"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","sourcesContent":["import { forwardRef, useRef, createElement, useContext, useCallback, useEffect, useMemo, Fragment, useState, useReducer } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\r\nimport { createNamedContext } from '@reach/utils/context';\r\nimport { isFunction } from '@reach/utils/type-check';\r\nimport { makeId } from '@reach/utils/make-id';\r\nimport { noop } from '@reach/utils/noop';\r\nimport { useCheckStyles } from '@reach/utils/dev-utils';\r\nimport { useComposedRefs } from '@reach/utils/compose-refs';\r\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\r\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\r\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\r\nimport { useId } from '@reach/auto-id';\r\nimport { Popover, positionMatchWidth } from '@reach/popover';\r\n\r\nfunction _objectWithoutPropertiesLoose(source, excluded) {\r\n  if (source == null) return {};\r\n  var target = {};\r\n  var sourceKeys = Object.keys(source);\r\n  var key, i;\r\n\r\n  for (i = 0; i < sourceKeys.length; i++) {\r\n    key = sourceKeys[i];\r\n    if (excluded.indexOf(key) >= 0) continue;\r\n    target[key] = source[key];\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nfunction _extends() {\r\n  _extends = Object.assign || function (target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n      var source = arguments[i];\r\n\r\n      for (var key in source) {\r\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n          target[key] = source[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return target;\r\n  };\r\n\r\n  return _extends.apply(this, arguments);\r\n}\r\n\r\n// Forked from https://github.com/bvaughn/highlight-words-core\r\n\r\n/**\r\n * Creates an array of chunk objects representing both higlightable and non\r\n * highlightable pieces of text that match each search word.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\r\nfunction findAll(_ref) {\r\n  var autoEscape = _ref.autoEscape,\r\n      _ref$caseSensitive = _ref.caseSensitive,\r\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\r\n      _ref$findChunks = _ref.findChunks,\r\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\r\n      sanitize = _ref.sanitize,\r\n      searchWords = _ref.searchWords,\r\n      textToHighlight = _ref.textToHighlight;\r\n  return fillInChunks({\r\n    chunksToHighlight: combineChunks({\r\n      chunks: findChunks({\r\n        autoEscape: autoEscape,\r\n        caseSensitive: caseSensitive,\r\n        sanitize: sanitize,\r\n        searchWords: searchWords,\r\n        textToHighlight: textToHighlight\r\n      })\r\n    }),\r\n    totalLength: textToHighlight ? textToHighlight.length : 0\r\n  });\r\n}\r\n/**\r\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\r\n * single chunks.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\r\n\r\n\r\nfunction combineChunks(_ref2) {\r\n  var chunks = _ref2.chunks;\r\n  return chunks.sort(function (first, second) {\r\n    return first.start - second.start;\r\n  }).reduce(function (processedChunks, nextChunk) {\r\n    // First chunk just goes straight in the array...\r\n    if (processedChunks.length === 0) {\r\n      return [nextChunk];\r\n    } else {\r\n      // ... subsequent chunks get checked to see if they overlap...\r\n      var prevChunk = processedChunks.pop();\r\n\r\n      if (nextChunk.start <= prevChunk.end) {\r\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\r\n        // largest of the end indeces.\r\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\r\n        processedChunks.push({\r\n          highlight: false,\r\n          start: prevChunk.start,\r\n          end: endIndex\r\n        });\r\n      } else {\r\n        processedChunks.push(prevChunk, nextChunk);\r\n      }\r\n\r\n      return processedChunks;\r\n    }\r\n  }, []);\r\n}\r\n/**\r\n * Examine text for any matches. If we find matches, add them to the returned\r\n * array as a \"chunk\" object.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\r\n\r\n\r\nfunction defaultFindChunks(_ref3) {\r\n  var autoEscape = _ref3.autoEscape,\r\n      caseSensitive = _ref3.caseSensitive,\r\n      _ref3$sanitize = _ref3.sanitize,\r\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\r\n      searchWords = _ref3.searchWords,\r\n      textToHighlight = _ref3.textToHighlight;\r\n  textToHighlight = sanitize(textToHighlight || \"\");\r\n  return searchWords.filter(function (searchWord) {\r\n    return searchWord;\r\n  }) // Remove empty words\r\n  .reduce(function (chunks, searchWord) {\r\n    searchWord = sanitize(searchWord);\r\n\r\n    if (autoEscape) {\r\n      searchWord = escapeRegExpFn(searchWord);\r\n    }\r\n\r\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\r\n    var match;\r\n\r\n    while (match = regex.exec(textToHighlight || \"\")) {\r\n      var start = match.index;\r\n      var end = regex.lastIndex; // We do not return zero-length matches\r\n\r\n      if (end > start) {\r\n        chunks.push({\r\n          highlight: false,\r\n          start: start,\r\n          end: end\r\n        });\r\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\r\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\r\n\r\n\r\n      if (match.index === regex.lastIndex) {\r\n        regex.lastIndex++;\r\n      }\r\n    }\r\n\r\n    return chunks;\r\n  }, []);\r\n}\r\n/**\r\n * Given a set of chunks to highlight, create an additional set of chunks\r\n * to represent the bits of text between the highlighted text.\r\n *\r\n * @return Array of \"chunk\" objects\r\n */\r\n\r\n\r\nfunction fillInChunks(_ref4) {\r\n  var chunksToHighlight = _ref4.chunksToHighlight,\r\n      totalLength = _ref4.totalLength;\r\n  var allChunks = [];\r\n\r\n  if (chunksToHighlight.length === 0) {\r\n    append(0, totalLength, false);\r\n  } else {\r\n    var lastIndex = 0;\r\n    chunksToHighlight.forEach(function (chunk) {\r\n      append(lastIndex, chunk.start, false);\r\n      append(chunk.start, chunk.end, true);\r\n      lastIndex = chunk.end;\r\n    });\r\n    append(lastIndex, totalLength, false);\r\n  }\r\n\r\n  return allChunks;\r\n\r\n  function append(start, end, highlight) {\r\n    if (end - start > 0) {\r\n      allChunks.push({\r\n        start: start,\r\n        end: end,\r\n        highlight: highlight\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction defaultSanitize(string) {\r\n  return string;\r\n}\r\n\r\nfunction escapeRegExpFn(string) {\r\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\r\n}\r\n\r\nvar HighlightWords = {\r\n  combineChunks: combineChunks,\r\n  fillInChunks: fillInChunks,\r\n  findAll: findAll,\r\n  findChunks: defaultFindChunks\r\n};\r\n\r\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\r\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\r\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\r\n    _excluded4 = [\"persistSelection\", \"as\"],\r\n    _excluded5 = [\"as\", \"children\", \"value\", \"onClick\"],\r\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\r\n\r\nvar _on, _on2, _on3, _on4, _states;\r\n////////////////////////////////////////////////////////////////////////////////\r\n// States\r\n// Nothing going on, waiting for the user to type or use the arrow keys\r\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\r\n\r\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\r\n\r\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\r\n// are not ComboboxInputs\r\n\r\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\r\n// Events\r\n// User cleared the value w/ backspace, but input still has focus\r\n\r\nvar CLEAR = \"CLEAR\"; // User is typing\r\n\r\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\r\n// Prevents initial change from sending the user to the NAVIGATING state\r\n// https://github.com/reach/reach-ui/issues/464\r\n\r\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\r\n\r\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\r\n// value from the click, not the current nav item\r\n\r\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\r\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\r\n\r\nvar ESCAPE = \"ESCAPE\";\r\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\r\n\r\nvar INTERACT = \"INTERACT\";\r\nvar FOCUS = \"FOCUS\";\r\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\r\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\r\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\r\n\r\nvar stateChart = {\r\n  initial: IDLE,\r\n  states: (_states = {}, _states[IDLE] = {\r\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\r\n  }, _states[SUGGESTING] = {\r\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\r\n  }, _states[NAVIGATING] = {\r\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\r\n  }, _states[INTERACTING] = {\r\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\r\n  }, _states)\r\n};\r\n\r\nvar reducer = function reducer(data, event) {\r\n  var nextState = _extends({}, data, {\r\n    lastEventType: event.type\r\n  });\r\n\r\n  switch (event.type) {\r\n    case CHANGE:\r\n    case INITIAL_CHANGE:\r\n      return _extends({}, nextState, {\r\n        navigationValue: null,\r\n        value: event.value\r\n      });\r\n\r\n    case NAVIGATE:\r\n    case OPEN_WITH_BUTTON:\r\n    case OPEN_WITH_INPUT_CLICK:\r\n      return _extends({}, nextState, {\r\n        navigationValue: findNavigationValue(nextState, event)\r\n      });\r\n\r\n    case CLEAR:\r\n      return _extends({}, nextState, {\r\n        value: \"\",\r\n        navigationValue: null\r\n      });\r\n\r\n    case BLUR:\r\n    case ESCAPE:\r\n      return _extends({}, nextState, {\r\n        navigationValue: null\r\n      });\r\n\r\n    case SELECT_WITH_CLICK:\r\n      return _extends({}, nextState, {\r\n        value: event.value,\r\n        navigationValue: null\r\n      });\r\n\r\n    case SELECT_WITH_KEYBOARD:\r\n      return _extends({}, nextState, {\r\n        value: data.navigationValue,\r\n        navigationValue: null\r\n      });\r\n\r\n    case CLOSE_WITH_BUTTON:\r\n      return _extends({}, nextState, {\r\n        navigationValue: null\r\n      });\r\n\r\n    case INTERACT:\r\n      return nextState;\r\n\r\n    case FOCUS:\r\n      return _extends({}, nextState, {\r\n        navigationValue: findNavigationValue(nextState, event)\r\n      });\r\n\r\n    default:\r\n      return nextState;\r\n  }\r\n};\r\n\r\nfunction popoverIsExpanded(state) {\r\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\r\n}\r\n/**\r\n * When we open a list, set the navigation value to the value in the input, if\r\n * it's in the list, then it'll automatically be highlighted.\r\n *\r\n * @param stateData\r\n * @param event\r\n */\r\n\r\n\r\nfunction findNavigationValue(stateData, event) {\r\n  // @ts-ignore\r\n  if (event.value) {\r\n    // @ts-ignore\r\n    return event.value; // @ts-ignore\r\n  } else if (event.persistSelection) {\r\n    return stateData.value;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\r\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\r\n// can work it's highlight text magic no matter what else is rendered around\r\n// it.\r\n\r\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Combobox\r\n *\r\n * @see Docs https://reach.tech/combobox#combobox\r\n */\r\n\r\nvar Combobox = /*#__PURE__*/forwardRef(function Combobox(_ref, forwardedRef) {\r\n  var _data$navigationValue;\r\n\r\n  var onSelect = _ref.onSelect,\r\n      _ref$openOnFocus = _ref.openOnFocus,\r\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\r\n      children = _ref.children,\r\n      _ref$as = _ref.as,\r\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\r\n      ariaLabel = _ref[\"aria-label\"],\r\n      ariaLabelledby = _ref[\"aria-labelledby\"],\r\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\r\n\r\n  var _useDescendantsInit = useDescendantsInit(),\r\n      options = _useDescendantsInit[0],\r\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\r\n\r\n\r\n  var inputRef = useRef();\r\n  var popoverRef = useRef();\r\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\r\n  // the user's value while navigating (because it's always the user's value),\r\n  // but we need to know this in useKeyDown which is far away from the prop\r\n  // here, so we do something sneaky and write it to this ref on context so we\r\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\r\n  // about this one too!\r\n\r\n  var autocompletePropRef = useRef(false);\r\n  var persistSelectionRef = useRef(false);\r\n  var defaultData = {\r\n    // The value the user has typed. We derive this also when the developer is\r\n    // controlling the value of ComboboxInput.\r\n    value: \"\",\r\n    // the value the user has navigated to with the keyboard\r\n    navigationValue: null\r\n  };\r\n\r\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\r\n      state = _useReducerMachine[0],\r\n      data = _useReducerMachine[1],\r\n      transition = _useReducerMachine[2];\r\n\r\n  useFocusManagement(data.lastEventType, inputRef);\r\n  var id = useId(props.id);\r\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\r\n  var context = {\r\n    ariaLabel: ariaLabel,\r\n    ariaLabelledby: ariaLabelledby,\r\n    autocompletePropRef: autocompletePropRef,\r\n    buttonRef: buttonRef,\r\n    comboboxId: id,\r\n    data: data,\r\n    inputRef: inputRef,\r\n    isExpanded: popoverIsExpanded(state),\r\n    listboxId: listboxId,\r\n    onSelect: onSelect || noop,\r\n    openOnFocus: openOnFocus,\r\n    persistSelectionRef: persistSelectionRef,\r\n    popoverRef: popoverRef,\r\n    state: state,\r\n    transition: transition\r\n  };\r\n  useCheckStyles(\"combobox\");\r\n  return /*#__PURE__*/createElement(DescendantProvider, {\r\n    context: ComboboxDescendantContext,\r\n    items: options,\r\n    set: setOptions\r\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\r\n    value: context\r\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\r\n    \"data-reach-combobox\": \"\",\r\n    \"data-state\": getDataState(state),\r\n    ref: forwardedRef\r\n  }), isFunction(children) ? children({\r\n    id: id,\r\n    isExpanded: popoverIsExpanded(state),\r\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\r\n    state: state\r\n  }) : children)));\r\n});\r\n/**\r\n * @see Docs https://reach.tech/combobox#combobox-props\r\n */\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  Combobox.displayName = \"Combobox\";\r\n  Combobox.propTypes = {\r\n    as: PropTypes.any,\r\n    onSelect: PropTypes.func,\r\n    openOnFocus: PropTypes.bool\r\n  };\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxInput\r\n *\r\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxinput\r\n */\r\n\r\n\r\nvar ComboboxInput = /*#__PURE__*/forwardRef(function ComboboxInput(_ref2, forwardedRef) {\r\n  var _ref2$as = _ref2.as,\r\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\r\n      _ref2$selectOnClick = _ref2.selectOnClick,\r\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\r\n      _ref2$autocomplete = _ref2.autocomplete,\r\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\r\n      onClick = _ref2.onClick,\r\n      onChange = _ref2.onChange,\r\n      onKeyDown = _ref2.onKeyDown,\r\n      onBlur = _ref2.onBlur,\r\n      onFocus = _ref2.onFocus,\r\n      controlledValue = _ref2.value,\r\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2);\r\n\r\n  // https://github.com/reach/reach-ui/issues/464\r\n  var _React$useRef = useRef(controlledValue),\r\n      initialControlledValue = _React$useRef.current;\r\n\r\n  var controlledValueChangedRef = useRef(false);\r\n  useUpdateEffect(function () {\r\n    controlledValueChangedRef.current = true;\r\n  }, [controlledValue]);\r\n\r\n  var _React$useContext = useContext(ComboboxContext),\r\n      _React$useContext$dat = _React$useContext.data,\r\n      navigationValue = _React$useContext$dat.navigationValue,\r\n      value = _React$useContext$dat.value,\r\n      lastEventType = _React$useContext$dat.lastEventType,\r\n      inputRef = _React$useContext.inputRef,\r\n      state = _React$useContext.state,\r\n      transition = _React$useContext.transition,\r\n      listboxId = _React$useContext.listboxId,\r\n      autocompletePropRef = _React$useContext.autocompletePropRef,\r\n      openOnFocus = _React$useContext.openOnFocus,\r\n      isExpanded = _React$useContext.isExpanded,\r\n      ariaLabel = _React$useContext.ariaLabel,\r\n      ariaLabelledby = _React$useContext.ariaLabelledby,\r\n      persistSelectionRef = _React$useContext.persistSelectionRef;\r\n\r\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\r\n  // caused by clicking inside the list, and if so, don't close the List.\r\n\r\n  var selectOnClickRef = useRef(false);\r\n  var handleKeyDown = useKeyDown();\r\n  var handleBlur = useBlur();\r\n  var isControlled = controlledValue != null; // Layout effect should be SSR-safe here because we don't actually do\r\n  // anything with this ref that involves rendering until after we've\r\n  // let the client hydrate in nested components.\r\n\r\n  useIsomorphicLayoutEffect(function () {\r\n    autocompletePropRef.current = autocomplete;\r\n  }, [autocomplete, autocompletePropRef]);\r\n  var handleValueChange = useCallback(function (value) {\r\n    if (value.trim() === \"\") {\r\n      transition(CLEAR);\r\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\r\n      transition(INITIAL_CHANGE, {\r\n        value: value\r\n      });\r\n    } else {\r\n      transition(CHANGE, {\r\n        value: value\r\n      });\r\n    }\r\n  }, [initialControlledValue, transition]);\r\n  useEffect(function () {\r\n    // If they are controlling the value we still need to do our transitions,\r\n    // so  we have this derived state to emulate onChange of the input as we\r\n    // receive new `value`s ...[*]\r\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\r\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\r\n      handleValueChange(controlledValue);\r\n    }\r\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\r\n  // user types, instead the developer controls it with the normal input\r\n  // onChange prop\r\n\r\n  function handleChange(event) {\r\n    var value = event.target.value;\r\n\r\n    if (!isControlled) {\r\n      handleValueChange(value);\r\n    }\r\n  }\r\n\r\n  function handleFocus() {\r\n    if (selectOnClick) {\r\n      selectOnClickRef.current = true;\r\n    } // If we select an option with click, useFocusManagement will focus the\r\n    // input, in those cases we don't want to cause the menu to open back up,\r\n    // so we guard behind these states.\r\n\r\n\r\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\r\n      transition(FOCUS, {\r\n        persistSelection: persistSelectionRef.current\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleClick() {\r\n    if (selectOnClickRef.current) {\r\n      var _inputRef$current;\r\n\r\n      selectOnClickRef.current = false;\r\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\r\n    }\r\n\r\n    if (openOnFocus && state === IDLE) {\r\n      transition(OPEN_WITH_INPUT_CLICK);\r\n    }\r\n  }\r\n\r\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\r\n  navigationValue || controlledValue || value : controlledValue || value;\r\n  return /*#__PURE__*/createElement(Comp, _extends({\r\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\r\n    \"aria-autocomplete\": \"both\",\r\n    \"aria-controls\": listboxId,\r\n    \"aria-expanded\": isExpanded,\r\n    \"aria-haspopup\": \"listbox\",\r\n    \"aria-label\": ariaLabel,\r\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\r\n    role: \"combobox\"\r\n  }, props, {\r\n    \"data-reach-combobox-input\": \"\",\r\n    \"data-state\": getDataState(state),\r\n    ref: ref,\r\n    onBlur: composeEventHandlers(onBlur, handleBlur),\r\n    onChange: composeEventHandlers(onChange, handleChange),\r\n    onClick: composeEventHandlers(onClick, handleClick),\r\n    onFocus: composeEventHandlers(onFocus, handleFocus),\r\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\r\n    value: inputValue || \"\"\r\n  }));\r\n});\r\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxinput-props\r\n */\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxInput.displayName = \"ComboboxInput\";\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxPopover\r\n *\r\n * Contains the popup that renders the list. Because some UI needs to render\r\n * more than the list in the popup, you need to render one of these around the\r\n * list. For example, maybe you want to render the number of results suggested.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxpopover\r\n */\r\n\r\n\r\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function ComboboxPopover(_ref3, forwardedRef) {\r\n  var _ref3$as = _ref3.as,\r\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\r\n      children = _ref3.children,\r\n      _ref3$portal = _ref3.portal,\r\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\r\n      onKeyDown = _ref3.onKeyDown,\r\n      onBlur = _ref3.onBlur,\r\n      _ref3$position = _ref3.position,\r\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\r\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\r\n\r\n  var _React$useContext2 = useContext(ComboboxContext),\r\n      popoverRef = _React$useContext2.popoverRef,\r\n      inputRef = _React$useContext2.inputRef,\r\n      isExpanded = _React$useContext2.isExpanded,\r\n      state = _React$useContext2.state;\r\n\r\n  var ref = useComposedRefs(popoverRef, forwardedRef);\r\n  var handleKeyDown = useKeyDown();\r\n  var handleBlur = useBlur();\r\n  var sharedProps = {\r\n    \"data-reach-combobox-popover\": \"\",\r\n    \"data-state\": getDataState(state),\r\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\r\n    onBlur: composeEventHandlers(onBlur, handleBlur),\r\n    // Instead of conditionally rendering the popover we use the `hidden` prop\r\n    // because we don't want to unmount on close (from escape or onSelect).\r\n    // However, the developer can conditionally render the ComboboxPopover if\r\n    // they do want to cause mount/unmount based on the app's own data (like\r\n    // results.length or whatever).\r\n    hidden: !isExpanded,\r\n    tabIndex: -1,\r\n    children: children\r\n  };\r\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\r\n    as: Comp\r\n  }, props, {\r\n    ref: ref,\r\n    position: position,\r\n    targetRef: inputRef\r\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\r\n    ref: ref\r\n  }, props, sharedProps));\r\n});\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxPopover.displayName = \"ComboboxPopover\";\r\n}\r\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\r\n */\r\n\r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxList\r\n *\r\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\r\n * for the list.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxlist\r\n */\r\nvar ComboboxList = /*#__PURE__*/forwardRef(function ComboboxList(_ref4, forwardedRef) {\r\n  var _ref4$persistSelectio = _ref4.persistSelection,\r\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\r\n      _ref4$as = _ref4.as,\r\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\r\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\r\n\r\n  var _React$useContext3 = useContext(ComboboxContext),\r\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\r\n      listboxId = _React$useContext3.listboxId;\r\n\r\n  if (persistSelection) {\r\n    persistSelectionRef.current = true;\r\n  }\r\n\r\n  return /*#__PURE__*/createElement(Comp, _extends({\r\n    role: \"listbox\"\r\n  }, props, {\r\n    ref: forwardedRef,\r\n    \"data-reach-combobox-list\": \"\",\r\n    id: listboxId\r\n  }));\r\n});\r\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxlist-props\r\n */\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxList.displayName = \"ComboboxList\";\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxOption\r\n *\r\n * An option that is suggested to the user as they interact with the combobox.\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxoption\r\n */\r\n\r\n\r\nvar ComboboxOption = /*#__PURE__*/forwardRef(function ComboboxOption(_ref5, forwardedRef) {\r\n  var _ref5$as = _ref5.as,\r\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\r\n      children = _ref5.children,\r\n      value = _ref5.value,\r\n      onClick = _ref5.onClick,\r\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\r\n\r\n  var _React$useContext4 = useContext(ComboboxContext),\r\n      onSelect = _React$useContext4.onSelect,\r\n      navigationValue = _React$useContext4.data.navigationValue,\r\n      transition = _React$useContext4.transition;\r\n\r\n  var ownRef = useRef(null);\r\n  var ref = useComposedRefs(forwardedRef, ownRef);\r\n  var index = useDescendant({\r\n    element: ownRef.current,\r\n    value: value\r\n  }, ComboboxDescendantContext);\r\n  var isActive = navigationValue === value;\r\n\r\n  var handleClick = function handleClick() {\r\n    onSelect && onSelect(value);\r\n    transition(SELECT_WITH_CLICK, {\r\n      value: value\r\n    });\r\n  };\r\n\r\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\r\n    value: {\r\n      value: value,\r\n      index: index\r\n    }\r\n  }, /*#__PURE__*/createElement(Comp, _extends({\r\n    \"aria-selected\": isActive,\r\n    role: \"option\"\r\n  }, props, {\r\n    \"data-reach-combobox-option\": \"\",\r\n    ref: ref,\r\n    id: String(makeHash(value)),\r\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\r\n    // element can be `document.activeElement` and then our focus checks in\r\n    // onBlur will work as intended\r\n    ,\r\n    tabIndex: -1,\r\n    onClick: composeEventHandlers(onClick, handleClick)\r\n  }), children ? isFunction(children) ? children({\r\n    value: value,\r\n    index: index\r\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\r\n});\r\n/**\r\n * @see Docs https://reach.tech/combobox#comboboxoption-props\r\n */\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxOption.displayName = \"ComboboxOption\";\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxOptionText\r\n *\r\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\r\n * matching and non-matching segments of text.\r\n *\r\n * We don't forwardRef or spread props because we render multiple spans or null,\r\n * should be fine 🤙\r\n *\r\n * @example\r\n *   <ComboboxOption value=\"Seattle\">\r\n *     🌧 <ComboboxOptionText />\r\n *   </ComboboxOption>\r\n *\r\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\r\n */\r\n\r\n\r\nfunction ComboboxOptionText() {\r\n  var _React$useContext5 = useContext(OptionContext),\r\n      value = _React$useContext5.value;\r\n\r\n  var _React$useContext6 = useContext(ComboboxContext),\r\n      contextValue = _React$useContext6.data.value;\r\n\r\n  var results = useMemo(function () {\r\n    return HighlightWords.findAll({\r\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\r\n      textToHighlight: value\r\n    });\r\n  }, [contextValue, value]);\r\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\r\n    var str = value.slice(result.start, result.end);\r\n    return /*#__PURE__*/createElement(\"span\", {\r\n      key: index,\r\n      \"data-reach-combobox-option-text\": \"\",\r\n      \"data-user-value\": result.highlight ? true : undefined,\r\n      \"data-suggested-value\": result.highlight ? undefined : true\r\n    }, str);\r\n  }) : value);\r\n}\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * ComboboxButton\r\n */\r\n\r\n\r\nvar ComboboxButton = /*#__PURE__*/forwardRef(function ComboboxButton(_ref6, forwardedRef) {\r\n  var _ref6$as = _ref6.as,\r\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\r\n      onClick = _ref6.onClick,\r\n      onKeyDown = _ref6.onKeyDown,\r\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\r\n\r\n  var _React$useContext7 = useContext(ComboboxContext),\r\n      transition = _React$useContext7.transition,\r\n      state = _React$useContext7.state,\r\n      buttonRef = _React$useContext7.buttonRef,\r\n      listboxId = _React$useContext7.listboxId,\r\n      isExpanded = _React$useContext7.isExpanded;\r\n\r\n  var ref = useComposedRefs(buttonRef, forwardedRef);\r\n  var handleKeyDown = useKeyDown();\r\n\r\n  var handleClick = function handleClick() {\r\n    if (state === IDLE) {\r\n      transition(OPEN_WITH_BUTTON);\r\n    } else {\r\n      transition(CLOSE_WITH_BUTTON);\r\n    }\r\n  };\r\n\r\n  return /*#__PURE__*/createElement(Comp, _extends({\r\n    \"aria-controls\": listboxId,\r\n    \"aria-haspopup\": \"listbox\",\r\n    \"aria-expanded\": isExpanded\r\n  }, props, {\r\n    \"data-reach-combobox-button\": \"\",\r\n    ref: ref,\r\n    onClick: composeEventHandlers(onClick, handleClick),\r\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\r\n  }));\r\n});\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  ComboboxButton.displayName = \"ComboboxButton\";\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Move focus back to the input if we start navigating w/ the\r\n * keyboard after focus has moved to any focusable content in\r\n * the popup.\r\n *\r\n * @param lastEventType\r\n * @param inputRef\r\n */\r\n\r\n\r\nfunction useFocusManagement(lastEventType, inputRef) {\r\n  // useLayoutEffect so that the cursor goes to the end of the input instead\r\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\r\n  //\r\n  // Should be safe to use here since we're just focusing an input.\r\n  useIsomorphicLayoutEffect(function () {\r\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\r\n      var _inputRef$current2;\r\n\r\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\r\n    }\r\n  }, [inputRef, lastEventType]);\r\n}\r\n/**\r\n * We want the same events when the input or the popup have focus (HOW COOL ARE\r\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\r\n */\r\n\r\n\r\nfunction useKeyDown() {\r\n  var _React$useContext8 = useContext(ComboboxContext),\r\n      navigationValue = _React$useContext8.data.navigationValue,\r\n      onSelect = _React$useContext8.onSelect,\r\n      state = _React$useContext8.state,\r\n      transition = _React$useContext8.transition,\r\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\r\n      persistSelectionRef = _React$useContext8.persistSelectionRef;\r\n\r\n  var options = useDescendants(ComboboxDescendantContext);\r\n  return function handleKeyDown(event) {\r\n    var index = options.findIndex(function (_ref7) {\r\n      var value = _ref7.value;\r\n      return value === navigationValue;\r\n    });\r\n\r\n    function getNextOption() {\r\n      var atBottom = index === options.length - 1;\r\n\r\n      if (atBottom) {\r\n        if (autocompletePropRef.current) {\r\n          // Go back to the value the user has typed because we are\r\n          // autocompleting and they need to be able to get back to what\r\n          // they had typed w/o having to backspace out.\r\n          return null;\r\n        } else {\r\n          // cycle through\r\n          return getFirstOption();\r\n        }\r\n      } else {\r\n        // Go to the next item in the list\r\n        return options[(index + 1) % options.length];\r\n      }\r\n    }\r\n\r\n    function getPreviousOption() {\r\n      var atTop = index === 0;\r\n\r\n      if (atTop) {\r\n        if (autocompletePropRef.current) {\r\n          // Go back to the value the user has typed because we are\r\n          // autocompleting and they need to be able to get back to what\r\n          // they had typed w/o having to backspace out.\r\n          return null;\r\n        } else {\r\n          // cycle through\r\n          return getLastOption();\r\n        }\r\n      } else if (index === -1) {\r\n        // displaying the user's value, so go select the last one\r\n        return getLastOption();\r\n      } else {\r\n        // normal case, select previous\r\n        return options[(index - 1 + options.length) % options.length];\r\n      }\r\n    }\r\n\r\n    function getFirstOption() {\r\n      return options[0];\r\n    }\r\n\r\n    function getLastOption() {\r\n      return options[options.length - 1];\r\n    }\r\n\r\n    switch (event.key) {\r\n      case \"ArrowDown\":\r\n        // Don't scroll the page\r\n        event.preventDefault();\r\n\r\n        if (!options || !options.length) {\r\n          return;\r\n        }\r\n\r\n        if (state === IDLE) {\r\n          // Opening a closed list\r\n          transition(NAVIGATE, {\r\n            persistSelection: persistSelectionRef.current\r\n          });\r\n        } else {\r\n          var next = getNextOption();\r\n          transition(NAVIGATE, {\r\n            value: next ? next.value : null\r\n          });\r\n        }\r\n\r\n        break;\r\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\r\n\r\n      case \"ArrowUp\":\r\n        // Don't scroll the page\r\n        event.preventDefault();\r\n\r\n        if (!options || options.length === 0) {\r\n          return;\r\n        }\r\n\r\n        if (state === IDLE) {\r\n          transition(NAVIGATE);\r\n        } else {\r\n          var prev = getPreviousOption();\r\n          transition(NAVIGATE, {\r\n            value: prev ? prev.value : null\r\n          });\r\n        }\r\n\r\n        break;\r\n\r\n      case \"Home\":\r\n      case \"PageUp\":\r\n        // Don't scroll the page\r\n        event.preventDefault();\r\n\r\n        if (!options || options.length === 0) {\r\n          return;\r\n        }\r\n\r\n        if (state === IDLE) {\r\n          transition(NAVIGATE);\r\n        } else {\r\n          transition(NAVIGATE, {\r\n            value: getFirstOption().value\r\n          });\r\n        }\r\n\r\n        break;\r\n\r\n      case \"End\":\r\n      case \"PageDown\":\r\n        // Don't scroll the page\r\n        event.preventDefault();\r\n\r\n        if (!options || options.length === 0) {\r\n          return;\r\n        }\r\n\r\n        if (state === IDLE) {\r\n          transition(NAVIGATE);\r\n        } else {\r\n          transition(NAVIGATE, {\r\n            value: getLastOption().value\r\n          });\r\n        }\r\n\r\n        break;\r\n\r\n      case \"Escape\":\r\n        if (state !== IDLE) {\r\n          transition(ESCAPE);\r\n        }\r\n\r\n        break;\r\n\r\n      case \"Enter\":\r\n        if (state === NAVIGATING && navigationValue !== null) {\r\n          // don't want to submit forms\r\n          event.preventDefault();\r\n          onSelect && onSelect(navigationValue);\r\n          transition(SELECT_WITH_KEYBOARD);\r\n        }\r\n\r\n        break;\r\n    }\r\n  };\r\n}\r\n\r\nfunction useBlur() {\r\n  var _React$useContext9 = useContext(ComboboxContext),\r\n      state = _React$useContext9.state,\r\n      transition = _React$useContext9.transition,\r\n      popoverRef = _React$useContext9.popoverRef,\r\n      inputRef = _React$useContext9.inputRef,\r\n      buttonRef = _React$useContext9.buttonRef;\r\n\r\n  return function handleBlur(event) {\r\n    var popover = popoverRef.current;\r\n    var input = inputRef.current;\r\n    var button = buttonRef.current;\r\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\r\n\r\n    if (activeElement !== input && activeElement !== button && popover) {\r\n      if (popover.contains(activeElement)) {\r\n        // focus landed inside the combobox, keep it open\r\n        if (state !== INTERACTING) {\r\n          transition(INTERACT);\r\n        }\r\n      } else {\r\n        // focus landed outside the combobox, close it.\r\n        transition(BLUR);\r\n      }\r\n    }\r\n  };\r\n}\r\n/**\r\n * This manages transitions between states with a built in reducer to manage\r\n * the data that goes with those transitions.\r\n *\r\n * @param chart\r\n * @param reducer\r\n * @param initialData\r\n */\r\n\r\n\r\nfunction useReducerMachine(chart, reducer, initialData) {\r\n  var _React$useState = useState(chart.initial),\r\n      state = _React$useState[0],\r\n      setState = _React$useState[1];\r\n\r\n  var _React$useReducer = useReducer(reducer, initialData),\r\n      data = _React$useReducer[0],\r\n      dispatch = _React$useReducer[1];\r\n\r\n  var transition = function transition(event, payload) {\r\n    if (payload === void 0) {\r\n      payload = {};\r\n    }\r\n\r\n    var currentState = chart.states[state];\r\n    var nextState = currentState && currentState.on[event];\r\n\r\n    if (nextState) {\r\n      dispatch(_extends({\r\n        type: event,\r\n        state: state,\r\n        nextState: state\r\n      }, payload));\r\n      setState(nextState);\r\n      return;\r\n    }\r\n  };\r\n\r\n  return [state, data, transition];\r\n}\r\n/**\r\n * We don't want to track the active descendant with indexes because nothing is\r\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\r\n * ENTER. That only happens if you use the index as your data, rather than\r\n * *your data as your data*. We use this to generate a unique ID based on the\r\n * value of each item.  This function is short, sweet, and good enough™ (I also\r\n * don't know how it works, tbqh)\r\n *\r\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\r\n * @param str\r\n */\r\n\r\n\r\nfunction makeHash(str) {\r\n  var hash = 0;\r\n\r\n  if (str.length === 0) {\r\n    return hash;\r\n  }\r\n\r\n  for (var i = 0; i < str.length; i++) {\r\n    var _char = str.charCodeAt(i);\r\n\r\n    hash = (hash << 5) - hash + _char;\r\n    hash = hash & hash;\r\n  }\r\n\r\n  return hash;\r\n} // function getActiveElement(node: Element | null | undefined) {\r\n//   let activeElement: Element | null = null;\r\n//   try {\r\n//     // If Element.getRootNode is supported, we'll retrieve either the root\r\n//     // Document or shadow root depending on where the component is rendered.\r\n//     // https://github.com/reach/reach-ui/issues/787\r\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\r\n//       .activeElement;\r\n//   } finally {\r\n//     return activeElement || (node?.ownerDocument || document).activeElement;\r\n//   }\r\n// }\r\n\r\n\r\nfunction getDataState(state) {\r\n  return state.toLowerCase();\r\n}\r\n/**\r\n * Escape regexp special characters in `str`\r\n *\r\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\r\n * @param str\r\n */\r\n\r\n\r\nfunction escapeRegexp(str) {\r\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\r\n} //////////////////////////\r\n//////////////////////////////////////////////////////\r\n\r\n/**\r\n * A hook that exposes data for a given `Combobox` component to its descendants.\r\n *\r\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\r\n */\r\n\r\nfunction useComboboxContext() {\r\n  var _React$useContext10 = useContext(ComboboxContext),\r\n      isExpanded = _React$useContext10.isExpanded,\r\n      comboboxId = _React$useContext10.comboboxId,\r\n      data = _React$useContext10.data,\r\n      state = _React$useContext10.state;\r\n\r\n  var navigationValue = data.navigationValue;\r\n  return useMemo(function () {\r\n    return {\r\n      id: comboboxId,\r\n      isExpanded: isExpanded,\r\n      navigationValue: navigationValue != null ? navigationValue : null,\r\n      state: state\r\n    };\r\n  }, [comboboxId, isExpanded, navigationValue, state]);\r\n}\r\n/**\r\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\r\n *\r\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\r\n */\r\n\r\nfunction useComboboxOptionContext() {\r\n  var _React$useContext11 = useContext(OptionContext),\r\n      value = _React$useContext11.value,\r\n      index = _React$useContext11.index;\r\n\r\n  return useMemo(function () {\r\n    return {\r\n      value: value,\r\n      index: index\r\n    };\r\n  }, [value, index]);\r\n} ////////////////////////////////////////////////////////////////////////////////\r\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\r\n// what the heck?). Have a great day :D\r\n////////////////////////////////////////////////////////////////////////////////\r\n// Types\r\n\r\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useComboboxContext, useComboboxOptionContext };\r\n"]},"metadata":{},"sourceType":"module"}