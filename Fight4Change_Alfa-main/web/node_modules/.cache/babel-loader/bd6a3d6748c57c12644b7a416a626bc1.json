{"ast":null,"code":"import _regeneratorRuntime from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';//import Axios from 'axios';\nimport'../SignUpForm/Form.css';import CircularProgress from'@material-ui/core/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var formValid=function formValid(rest){var valid=true;if(rest.email.length===0&&rest.password.length===0){valid=false;}console.log(valid);return valid;};export var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false};_this.continue=function(e){e.preventDefault();var request={method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({userId:_this.props.values.email,password:_this.props.values.password})};_this.setState({loading:true});fetch('https://apdc-fasebeta.appspot.com/rest/login',request).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(response.ok){if(formValid(_this.props.values)){_this.props.nextStep();}localStorage.setItem('user',_this.props.values.email);}else{console.log(\"Something went wrong\");}setTimeout(function(){_this.setState({loading:false});},30000);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){var _this$props=this.props,values=_this$props.values,handleChange=_this$props.handleChange;var loading=this.state.loading;return/*#__PURE__*/_jsx(\"div\",{className:\"form-content-right\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:this.continue,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"email\",name:\"email\",placeholder:\"Enter your email\",onChange:handleChange('email'),defaultValue:values.email}),this.props.values.email.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"p\",children:\"Email required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",name:\"password\",placeholder:\"Enter your password\",onChange:handleChange('password'),defaultValue:values.password}),this.props.values.password.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"p\",children:\"Password required\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"form-input1-btn\",label:\"Confirm\",type:\"submit\",disabled:loading,children:[!loading&&/*#__PURE__*/_jsx(\"span\",{children:\"Confirm\"}),loading&&/*#__PURE__*/_jsx(CircularProgress,{className:\"buttonProgress\"})]}),(this.props.values.email.length===0||this.props.values.password.length===0)&&/*#__PURE__*/_jsx(\"p\",{className:\"p\",children:\"Please fill the missing entries\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"form-input-login\",children:[\"Don't have an account? Signup \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"here\"})]})]})});}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/src/Components/Login/LoginForm.js"],"names":["React","Component","CircularProgress","formValid","rest","valid","email","length","password","console","log","LoginForm","state","loading","continue","e","preventDefault","request","method","headers","body","JSON","stringify","userId","props","values","setState","fetch","then","response","ok","nextStep","localStorage","setItem","setTimeout","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n//import Axios from 'axios';\nimport '../SignUpForm/Form.css';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst formValid = rest => {\n    let valid = true;\n\n    if (rest.email.length === 0 && rest.password.length === 0) {\n        valid = false;\n    }\n\n    console.log(valid);\n\n    return valid;\n}\n\nexport class LoginForm extends Component {\n\n    state = {\n        loading: false\n    }\n\n\n    continue = e => {\n        e.preventDefault();\n\n        const request = {\n            method: 'POST',\n\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n\n                userId: this.props.values.email,\n\n                password: this.props.values.password\n\n            })\n        };\n        this.setState({ loading: true });\n        fetch('https://apdc-fasebeta.appspot.com/rest/login', request)\n            .then(async response => {\n\n                if (response.ok) {\n\n                    if (formValid(this.props.values)) {\n                        this.props.nextStep();\n                    }\n\n                    localStorage.setItem('user', this.props.values.email);\n                }\n                else {\n                    console.log(\"Something went wrong\")\n\n                }\n                setTimeout(() => {\n                    this.setState({ loading: false });\n                }, 30000)\n\n            })\n    };\n\n    render() {\n        const { values, handleChange } = this.props;\n        const { loading } = this.state;\n\n        return (\n\n            <div className='form-content-right'>\n                <form className='form' onSubmit={this.continue}>\n\n                    <div className='form-inputs'>\n                        <label className='form-label'>Email</label>\n                        <input\n                            className='form-input'\n                            type='email'\n                            name='email'\n                            placeholder='Enter your email'\n                            onChange={handleChange('email')}\n                            defaultValue={values.email}\n                        />\n                        {this.props.values.email.length === 0 && <p className=\"p\">Email required</p>}\n                    </div>\n\n                    <div className='form-inputs'>\n                        <label className='form-label'>Password</label>\n                        <input\n                            className='form-input'\n                            type='password'\n                            name='password'\n                            placeholder='Enter your password'\n                            onChange={handleChange('password')}\n                            defaultValue={values.password}\n                        />\n                        {this.props.values.password.length === 0 && <p className=\"p\">Password required</p>}\n                    </div>\n\n                    <button className='form-input1-btn' label='Confirm' type='submit' disabled={loading}>\n                        {!loading && <span>Confirm</span>}\n                        {loading && <CircularProgress className=\"buttonProgress\" />}\n                    </button>\n\n                    {(this.props.values.email.length === 0 || this.props.values.password.length === 0) && (<p className=\"p\">Please fill the missing entries</p>)}\n\n                    <span className='form-input-login'>\n                        Don't have an account? Signup <a href='/signup'>here</a>\n                    </span>\n                </form>\n            </div>\n        );\n    }\n\n}\n\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}