{"ast":null,"code":"var _jsxFileName = \"/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/src/Components/Maps/Details.js\",\n    _s = $RefreshSig$();\n\n/*global google*/\nimport React from 'react';\nimport \"./map.css\";\nimport { MDBtn, MBtn } from './Button';\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport { LocateMDBtn, LocateMBtn } from './LocateButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst mapContainerStyle = {\n  height: \"80vh\",\n  width: \"50%\"\n};\nconst center = {\n  lat: 38.660783,\n  lng: -9.205681\n};\n\nfunction CreateEvents() {\n  _s();\n\n  const [state, setState] = React.useState({\n    eventsName: '',\n    date: '',\n    time: '',\n    origin: '',\n    description: '',\n    directions: null\n  });\n\n  function handleChange(evt) {\n    const value = evt.target.value;\n    setState({ ...state,\n      [evt.target.name]: value\n    });\n  }\n\n  const handleContinue = e => {\n    e.preventDefault();\n    console.log(\"entrei no continue\");\n    const request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"user\")\n      },\n      body: JSON.stringify({\n        eventsName: state.username,\n        token: localStorage.getItem('user'),\n        origin: state.origin,\n        time: state.time,\n        date: state.date,\n        description: state.description,\n        markers: markers\n      })\n    };\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request).then(async response => {\n      if (response.ok) {\n        console.log(\"Event successfully created!\");\n      } else {\n        console.log(\"Something went wrong.\");\n      }\n    });\n  };\n\n  const [markers, setMarkers] = React.useState([]);\n  const [selected, setSelected] = React.useState([]);\n  var service = new google.maps.DirectionsService();\n  const onMapClick = React.useCallback(e => {\n    setMarkers(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    }]);\n  }, []);\n  const onMarkerClick = React.useCallback(e => {\n    setSelected(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng(),\n      active: true\n    }]);\n  }, []);\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    mapRef.current = map;\n  }, []);\n  const panTo = React.useCallback(({\n    lat,\n    lng\n  }) => {\n    mapRef.current.panTo({\n      lat,\n      lng\n    });\n    mapRef.current.setZoom(20);\n  }, []);\n  const {\n    ready,\n    value,\n    suggestions: {\n      status,\n      data\n    },\n    setValue,\n    clearSuggestions\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: {\n        lat: () => 38.660783,\n        lng: () => -9.205681\n      },\n      radius: 100 * 1000\n    }\n  });\n\n  const handleInput = e => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async address => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({\n        address\n      });\n      console.log(\"results\" + results[0]);\n      const {\n        lat,\n        lng\n      } = await getLatLng(results[0]);\n      panTo({\n        lat,\n        lng\n      });\n      setMarkers(current => [...current, {\n        lat: lat,\n        lng: lng\n      }]);\n      const waypoints = markers.map(p => ({\n        location: {\n          lat: p.lat,\n          lng: p.lng\n        },\n        stopover: true\n      }));\n\n      if (waypoints.length >= 2) {\n        const origin = waypoints[0].location;\n        const destination = waypoints.pop().location;\n        console.log(origin);\n        service.route({\n          origin: origin,\n          destination: destination,\n          travelMode: google.maps.TravelMode.WALKING,\n          waypoints: waypoints\n        }, (result, status) => {\n          if (status === google.maps.DirectionsStatus.OK) {\n            setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        });\n      }\n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  };\n\n  const onMarkerDragEnd = (e, index) => {\n    console.log(index);\n    markers[index] = { ...markers[index],\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    };\n    const waypoints = markers.map(p => ({\n      location: {\n        lat: p.lat,\n        lng: p.lng\n      },\n      stopover: true\n    }));\n    console.log(\"waypoints \" + waypoints.length);\n\n    if (waypoints.length >= 2) {\n      const origin = waypoints[0].location;\n      const destination = waypoints.pop().location;\n      service.route({\n        origin: origin,\n        destination: destination,\n        travelMode: google.maps.TravelMode.WALKING,\n        waypoints: waypoints\n      }, (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          setState({\n            directions: result\n          });\n        } else {\n          console.error(`error fetching directions ${result}`);\n        }\n      });\n    }\n  };\n  /* const onMarkerClick = (e,index) => { \n     console.log(index);\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\n     console.log(markers[index].active)\n   };*/\n\n\n  const onInfoClose = (e, index) => {\n    selected[index] = { ...selected[index],\n      lat: selected[index].lat,\n      lng: selected[index].lng,\n      active: false\n    };\n  }; //const origin = markers[0];\n  //const destination = markers[markers.length-1];\n\n\n  const waypoints = markers.map(p => ({\n    location: {\n      lat: p.lat,\n      lng: p.lng\n    },\n    stopover: true\n  }));\n  console.log(\"waypoints \" + waypoints.length);\n\n  if (waypoints.length >= 2) {\n    const origin = waypoints[0].location;\n    const destination = waypoints.pop().location;\n    console.log(origin);\n    service.route({\n      origin: origin,\n      destination: destination,\n      travelMode: google.maps.TravelMode.WALKING,\n      waypoints: waypoints\n    }, (result, status) => {\n      if (status === google.maps.DirectionsStatus.OK) {\n        setState({\n          directions: result\n        });\n      } else {\n        console.error(`error fetching directions ${result}`);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(LocateMDBtn, {\n      children: /*#__PURE__*/_jsxDEV(LocateMBtn, {\n        className: \"locate\",\n        onClick: () => {\n          navigator.geolocation.getCurrentPosition(position => {\n            panTo({\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            });\n          }, () => null);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-compass fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"originImg\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-map-marker-alt fa-2x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"origin\",\n      children: /*#__PURE__*/_jsxDEV(Combobox, {\n        onSelect: handleSelect,\n        children: [/*#__PURE__*/_jsxDEV(ComboboxInput, {\n          value: value,\n          onChange: handleInput,\n          disabled: !ready,\n          placeholder: \"Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ComboboxPopover, {\n          children: /*#__PURE__*/_jsxDEV(ComboboxList, {\n            children: status === \"OK\" && data.map(({\n              id,\n              description\n            }) => /*#__PURE__*/_jsxDEV(ComboboxOption, {\n              value: description\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n      id: \"map\",\n      mapContainerStyle: mapContainerStyle,\n      zoom: 8,\n      center: center,\n      onClick: onMapClick,\n      onLoad: onMapLoad,\n      children: [markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: {\n          lat: marker.lat,\n          lng: marker.lng\n        },\n        draggable: true,\n        onDragEnd: e => onMarkerDragEnd(e, index),\n        onClick: e => onMarkerClick(e, index)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)), selected.map((select, index) => select.active ? /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: select.lat,\n          lng: select.lng\n        },\n        onCloseClick: e => onInfoClose(e, index),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"bear\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-hands-helping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this), \" \", \"Paragem na Rota\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Escolhido \", select.lat, \" , \", select.lng]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this) : null), \";\", /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n        directions: state.directions,\n        options: {\n          suppressMarkers: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"details\",\n      onSubmit: handleContinue,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nameImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Events Name\",\n          type: \"text\",\n          name: \"username\",\n          noValidate: true,\n          onChange: handleChange // values = {values}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-hourglass-half fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Duration\",\n          type: \"text\",\n          name: \"time\",\n          noValidate: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"OImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-dot-circle fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 31\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orig\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Location Beginning\",\n          type: \"text\",\n          name: \"origin\",\n          noValidate: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Ocalendar\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-calendar-alt fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Date\",\n          type: \"date\",\n          name: \"date\",\n          noValidate: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"DesImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-file-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textArea\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          placeholder: \"Event Descriprion\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MDBtn, {\n        children: /*#__PURE__*/_jsxDEV(MBtn, {\n          type: \"submit\",\n          onClick: console.log('click'),\n          children: \"Create Event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CreateEvents, \"JX7kBAtmNkj8uXSbgCfYm/DbsEo=\", false, function () {\n  return [usePlacesAutocomplete];\n});\n\n_c = CreateEvents;\n;\nexport default CreateEvents;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateEvents\");","map":{"version":3,"sources":["/Users/goncalomoura/Desktop/Fight4Change_Alfa/web/src/Components/Maps/Details.js"],"names":["React","MDBtn","MBtn","GoogleMap","Marker","InfoWindow","DirectionsRenderer","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","LocateMDBtn","LocateMBtn","mapContainerStyle","height","width","center","lat","lng","CreateEvents","state","setState","useState","eventsName","date","time","origin","description","directions","handleChange","evt","value","target","name","handleContinue","e","preventDefault","console","log","request","method","headers","localStorage","getItem","body","JSON","stringify","username","token","markers","fetch","then","response","ok","setMarkers","selected","setSelected","service","google","maps","DirectionsService","onMapClick","useCallback","current","latLng","onMarkerClick","active","mapRef","useRef","onMapLoad","map","panTo","setZoom","ready","suggestions","status","data","setValue","clearSuggestions","requestOptions","location","radius","handleInput","handleSelect","address","results","waypoints","p","stopover","length","destination","pop","route","travelMode","TravelMode","WALKING","result","DirectionsStatus","OK","error","onMarkerDragEnd","index","onInfoClose","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","id","marker","select","suppressMarkers"],"mappings":"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","sourcesContent":["/*global google*/\nimport React from 'react'\nimport \"./map.css\";\nimport { MDBtn, MBtn } from './Button'\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport { LocateMDBtn, LocateMBtn } from './LocateButton'\n\n\n\nconst mapContainerStyle = {\n  height: \"80vh\",\n  width: \"50%\",\n};\n\nconst center = {\n  lat: 38.660783,\n  lng: -9.205681,\n};\n\n\nfunction CreateEvents() {\n\n\n\n  const [state, setState] = React.useState({\n    eventsName: '',\n    date: '',\n    time: '',\n    origin: '',\n    description: '',\n    directions: null\n  })\n\n\n  function handleChange(evt) {\n    const value = evt.target.value;\n    setState({\n      ...state,\n      [evt.target.name]: value\n    });\n  }\n\n\n\n  const handleContinue = e => {\n    e.preventDefault();\n    console.log(\"entrei no continue\")\n\n    const request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n         'Authorization': 'Bearer ' + localStorage.getItem(\"user\") \n      },\n      body: JSON.stringify({\n        eventsName: state.username,\n        token:localStorage.getItem('user'),\n        origin: state.origin,\n        time: state.time,\n        date:state.date,\n        description:state.description,\n        markers:markers\n      })\n    };\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request)\n      .then(async response => {\n\n        if (response.ok) {\n          console.log(\"Event successfully created!\")\n        }\n        else {\n          console.log(\"Something went wrong.\")\n\n        }\n      })\n  };\n\n\n\n\n  const [markers, setMarkers] = React.useState([]);\n  const [selected, setSelected] = React.useState([]);\n  var service = new google.maps.DirectionsService();\n\n  \n\n  const onMapClick = React.useCallback((e) => {\n    setMarkers((current) => [\n      ...current,\n      {\n        lat: e.latLng.lat(),\n        lng: e.latLng.lng(),\n\n      },\n    ]);\n  }, []);\n\n  const onMarkerClick = React.useCallback((e) => {\n    setSelected((current) => [\n      ...current, {\n\n        lat: e.latLng.lat(),\n        lng: e.latLng.lng(),\n        active: true,\n      }\n    ])\n\n\n  },[])\n\n\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback((map) => {\n    mapRef.current = map;\n  }, []);\n\n  const panTo = React.useCallback(({ lat, lng }) => {\n    mapRef.current.panTo({ lat, lng });\n    mapRef.current.setZoom(20);\n  }, []);\n\n  const {\n    ready,\n    value,\n    suggestions: { status, data },\n    setValue,\n    clearSuggestions,\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: { lat: () => 38.660783, lng: () => -9.205681 },\n      radius: 100 * 1000,\n    },\n  });\n\n  const handleInput = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async (address) => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({ address });\n      console.log(\"results\" + results[0]);\n      const { lat, lng } = await getLatLng(results[0]);\n      panTo({ lat, lng });\n      setMarkers((current) => [\n        ...current,\n        {\n          lat: lat,\n          lng: lng,\n\n        },\n      ]);\n      const waypoints = markers.map(p => ({\n        location: { lat: p.lat, lng: p.lng },\n        stopover: true\n      }))\n    \n      \n      if (waypoints.length >= 2) {\n        const origin = waypoints[0].location;\n        const destination = waypoints.pop().location;\n        console.log(origin)\n    \n        service.route(\n    \n          {\n            origin: origin,\n            destination: destination,\n            travelMode: google.maps.TravelMode.WALKING,\n            waypoints: waypoints\n          },\n          (result, status) => {\n            if (status === google.maps.DirectionsStatus.OK) {\n              setState({\n                directions: result\n              }); \n            } else {\n              console.error(`error fetching directions ${result}`);\n            }\n          }\n    \n        )\n      }\n     \n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  };\n\n  const onMarkerDragEnd = (e, index) => {\n    console.log(index);\n    markers[index] = { ...markers[index], lat: e.latLng.lat(), lng: e.latLng.lng() }\n\n    const waypoints = markers.map(p => ({\n      location: { lat: p.lat, lng: p.lng },\n      stopover: true\n    }))\n  \n    console.log(\"waypoints \" + waypoints.length)\n    if (waypoints.length >= 2) {\n      const origin = waypoints[0].location;\n      const destination = waypoints.pop().location;\n      service.route(\n        {\n          origin: origin,\n          destination: destination,\n          travelMode: google.maps.TravelMode.WALKING,\n          waypoints: waypoints\n        },\n        (result, status) => {\n          if (status === google.maps.DirectionsStatus.OK) {\n            \n            setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        }\n  \n      )\n    }\n  \n\n\n  };\n  /* const onMarkerClick = (e,index) => { \n     console.log(index);\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\n     console.log(markers[index].active)\n   };*/\n  const onInfoClose = (e, index) => {\n    selected[index] = { ...selected[index], lat: selected[index].lat, lng: selected[index].lng, active: false }\n  }\n\n  \n\n\n  //const origin = markers[0];\n  //const destination = markers[markers.length-1];\n\n\n  const waypoints = markers.map(p => ({\n    location: { lat: p.lat, lng: p.lng },\n    stopover: true\n  }))\n\n  console.log(\"waypoints \" + waypoints.length)\n  if (waypoints.length >= 2) {\n    const origin = waypoints[0].location;\n    const destination = waypoints.pop().location;\n    console.log(origin)\n    service.route(\n\n      {\n        origin: origin,\n        destination: destination,\n        travelMode: google.maps.TravelMode.WALKING,\n        waypoints: waypoints\n      },\n      (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          \n          setState({\n            directions: result\n          });\n        } else {\n          console.error(`error fetching directions ${result}`);\n        }\n      }\n\n    )\n  }\n\n  return (\n\n    <>\n      <LocateMDBtn>\n        <LocateMBtn\n          className=\"locate\"\n          onClick={() => {\n            navigator.geolocation.getCurrentPosition(\n              (position) => {\n                panTo({\n                  lat: position.coords.latitude,\n                  lng: position.coords.longitude,\n                });\n              },\n              () => null\n            );\n          }}\n        >\n          <i className=\"far fa-compass fa-2x\"></i>\n        </LocateMBtn>\n      </LocateMDBtn>\n\n\n      <div className=\"originImg\"><i className=\"fas fa-map-marker-alt fa-2x\"></i></div>\n      <div className=\"origin\">\n        <Combobox onSelect={handleSelect}>\n          <ComboboxInput\n            value={value}\n            onChange={handleInput}\n            disabled={!ready}\n            placeholder=\"Location\"\n          />\n          <ComboboxPopover>\n            <ComboboxList>\n              {status === \"OK\" &&\n                data.map(({ id, description }) => (\n                  <ComboboxOption key={id} value={description} />\n                ))}\n            </ComboboxList>\n          </ComboboxPopover>\n        </Combobox>\n\n      </div>\n\n\n      <GoogleMap\n        id=\"map\"\n        mapContainerStyle={mapContainerStyle}\n        zoom={8}\n        center={center}\n        onClick={onMapClick}\n        onLoad={onMapLoad}\n      >\n\n        {markers.map((marker, index) => (\n          <Marker\n            key={index}\n            position={{ lat: marker.lat, lng: marker.lng }}\n            draggable={true}\n            onDragEnd={(e) => onMarkerDragEnd(e, index)}\n            onClick={(e) => onMarkerClick(e, index)}\n          />\n        ))}\n\n        {selected.map((select, index) => (select.active ? (\n\n          <InfoWindow\n            position={{ lat: select.lat, lng: select.lng }}\n            onCloseClick={(e) => onInfoClose(e, index)}\n          >\n            <div>\n              <h2>\n                <span role=\"img\" aria-label=\"bear\">\n                  <i className=\"fas fa-hands-helping\"></i>\n                </span>{\" \"}\n                Paragem na Rota\n              </h2>\n              <p>Escolhido {select.lat} , {select.lng}</p>\n            </div>\n          </InfoWindow>\n        ) : null))};\n            \n            <DirectionsRenderer directions={state.directions}  options={{\n           \n              suppressMarkers: true\n    \n            }} ></DirectionsRenderer>\n            \n         \n\n\n\n      </GoogleMap>\n\n\n\n\n      <form className=\"details\" onSubmit={handleContinue}>\n        <div className=\"nameImg\"><i className=\"fas fa-signature fa-2x\"></i></div>\n        <div className=\"name\">\n          <input\n            placeholder=\"Events Name\"\n            type=\"text\"\n            name=\"username\"\n            noValidate\n            onChange={handleChange}\n          // values = {values}\n          />\n        </div>\n        <div className=\"timeImg\"><i className=\"fas fa-hourglass-half fa-2x\"></i></div>\n        <div className=\"time\">\n          <input\n            placeholder=\"Duration\"\n            type=\"text\"\n            name=\"time\"\n            noValidate\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"OImg\"><i className=\"far fa-dot-circle fa-2x\"></i></div>\n        <div className=\"orig\">\n          <input\n            placeholder=\"Event Location Beginning\"\n            type=\"text\"\n            name=\"origin\"\n            noValidate\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"Ocalendar\"><i className=\"far fa-calendar-alt fa-2x\"></i></div>\n        <div className=\"date\">\n          <input\n            placeholder=\"Event Date\"\n            type=\"date\"\n            name=\"date\"\n            noValidate\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"DesImg\"><i className=\"fas fa-file-signature fa-2x\" ></i></div>\n        <div className=\"textArea\">\n          <textarea\n            name=\"description\"\n            placeholder=\"Event Descriprion\"\n            onChange={handleChange}\n\n          /></div>\n        <MDBtn>\n          <MBtn type='submit' onClick={console.log('click')}>Create Event</MBtn>\n        </MDBtn>\n      </form>\n\n    </>\n  )\n};\n\nexport default CreateEvents\n\n"]},"metadata":{},"sourceType":"module"}