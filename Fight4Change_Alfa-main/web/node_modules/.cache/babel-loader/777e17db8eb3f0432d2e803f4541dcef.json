{"ast":null,"code":"var _jsxFileName = \"/Users/goncalomoura/Documents/Fight4Change_Alfa/web/src/Components/Maps/Details.js\",\n    _s = $RefreshSig$();\n\n/*global google*/\nimport { React, useState } from 'react';\nimport \"./map.css\";\nimport { MDBtn, MBtn } from './Button';\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport { LocateMDBtn, LocateMBtn } from './LocateButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst google = window.google;\nconst mapContainerStyle = {\n  height: \"80vh\",\n  width: \"50%\"\n};\nconst center = {\n  lat: 38.660783,\n  lng: -9.205681\n};\n\nfunction CreateEvents() {\n  _s();\n\n  const [eventsName, setEventsName] = useState();\n  const [date, setDate] = useState();\n  const [time, setTime] = useState();\n  const [origin, setOrigin] = useState();\n  const [description, setDescription] = useState();\n  const [directions, setState] = React.useState();\n  /*\n    const handleChange = React.useCallback((e) => {\n      const value = e.target.value;\n      setState({\n          [e.target.name]: value\n      });\n      console.log(e.target.value)\n    })*/\n\n  const handleContinue = e => {\n    e.preventDefault();\n    console.log(\"entrei no continue\");\n    const request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"user\")\n      },\n      body: JSON.stringify({\n        eventsName: eventsName,\n        date: date,\n        origin: origin,\n        description: description,\n        time: time,\n        markers: markers,\n        token: localStorage.getItem(\"user\")\n      })\n    };\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request).then(response => {\n      console.log(request.headers);\n      console.log(\"mudei1\");\n      console.log(request.body);\n\n      if (response.ok) {\n        console.log(\"Event successfully created!\");\n      } else {\n        console.log(\"Something went wrong.\");\n      }\n    }).catch(error => console.error('Error', error));\n  };\n\n  const [markers, setMarkers] = React.useState([]);\n  const [selected, setSelected] = React.useState([]);\n  var service = new google.maps.DirectionsService();\n  const onMapClick = React.useCallback(e => {\n    setMarkers(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    }]);\n  }, []);\n  const onMarkerClick = React.useCallback(e => {\n    setSelected(current => [...current, {\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng(),\n      active: true\n    }]);\n  }, []);\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    mapRef.current = map;\n  }, []);\n  const panTo = React.useCallback(({\n    lat,\n    lng\n  }) => {\n    mapRef.current.panTo({\n      lat,\n      lng\n    });\n    mapRef.current.setZoom(20);\n  }, []);\n  const {\n    ready,\n    value,\n    suggestions: {\n      status,\n      data\n    },\n    setValue,\n    clearSuggestions\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: {\n        lat: () => 38.660783,\n        lng: () => -9.205681\n      },\n      radius: 100 * 1000\n    }\n  });\n\n  const handleInput = e => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async address => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({\n        address\n      });\n      const {\n        lat,\n        lng\n      } = await getLatLng(results[0]);\n      panTo({\n        lat,\n        lng\n      });\n      setMarkers(current => [...current, {\n        lat: lat,\n        lng: lng\n      }]);\n      const waypoints = markers.map(p => ({\n        location: {\n          lat: p.lat,\n          lng: p.lng\n        },\n        stopover: true\n      }));\n\n      if (waypoints.length >= 2) {\n        const origin = waypoints[0].location;\n        const destination = waypoints.pop().location;\n        service.route({\n          origin: origin,\n          destination: destination,\n          travelMode: google.maps.TravelMode.WALKING,\n          waypoints: waypoints\n        }, (result, status) => {\n          if (status === google.maps.DirectionsStatus.OK) {\n            setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        });\n      }\n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  };\n\n  const onMarkerDragEnd = (e, index) => {\n    markers[index] = { ...markers[index],\n      lat: e.latLng.lat(),\n      lng: e.latLng.lng()\n    };\n    const waypoints = markers.map(p => ({\n      location: {\n        lat: p.lat,\n        lng: p.lng\n      },\n      stopover: true\n    }));\n\n    if (waypoints.length >= 2) {\n      const origin = waypoints[0].location;\n      const destination = waypoints.pop().location;\n      service.route({\n        origin: origin,\n        destination: destination,\n        travelMode: google.maps.TravelMode.WALKING,\n        waypoints: waypoints\n      }, (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          setState({\n            directions: result\n          });\n        } else {\n          console.error(`error fetching directions ${result}`);\n        }\n      });\n    }\n  };\n  /* const onMarkerClick = (e,index) => { \n     console.log(index);\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\n     console.log(markers[index].active)\n   };*/\n\n\n  const onInfoClose = (e, index) => {\n    selected[index] = { ...selected[index],\n      lat: selected[index].lat,\n      lng: selected[index].lng,\n      active: false\n    };\n  }; //const origin = markers[0];\n  //const destination = markers[markers.length-1];\n\n\n  const waypoints = markers.map(p => ({\n    location: {\n      lat: p.lat,\n      lng: p.lng\n    },\n    stopover: true\n  }));\n\n  if (waypoints.length >= 2) {\n    const origin = waypoints[0].location;\n    const destination = waypoints.pop().location;\n    service.route({\n      origin: origin,\n      destination: destination,\n      travelMode: google.maps.TravelMode.WALKING,\n      waypoints: waypoints\n    }, (result, status) => {\n      if (status === google.maps.DirectionsStatus.OK) {\n        setState({\n          directions: result\n        });\n      } else {\n        console.error(`error fetching directions ${result}`);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(LocateMDBtn, {\n      children: /*#__PURE__*/_jsxDEV(LocateMBtn, {\n        className: \"locate\",\n        onClick: () => {\n          navigator.geolocation.getCurrentPosition(position => {\n            panTo({\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            });\n          }, () => null);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-compass fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"originImg\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-map-marker-alt fa-2x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"origin\",\n      children: /*#__PURE__*/_jsxDEV(Combobox, {\n        onSelect: handleSelect,\n        children: [/*#__PURE__*/_jsxDEV(ComboboxInput, {\n          value: value,\n          onChange: handleInput,\n          disabled: !ready,\n          placeholder: \"Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ComboboxPopover, {\n          children: /*#__PURE__*/_jsxDEV(ComboboxList, {\n            children: status === \"OK\" && data.map(({\n              id,\n              description\n            }) => /*#__PURE__*/_jsxDEV(ComboboxOption, {\n              value: description\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n      id: \"map\",\n      mapContainerStyle: mapContainerStyle,\n      zoom: 8,\n      center: center,\n      onClick: onMapClick,\n      onLoad: onMapLoad,\n      children: [markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: {\n          lat: marker.lat,\n          lng: marker.lng\n        },\n        draggable: true,\n        onDragEnd: e => onMarkerDragEnd(e, index),\n        onClick: e => onMarkerClick(e, index)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this)), selected.map((select, index) => select.active ? /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: select.lat,\n          lng: select.lng\n        },\n        onCloseClick: e => onInfoClose(e, index),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              role: \"img\",\n              \"aria-label\": \"bear\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-hands-helping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this), \" \", \"Paragem na Rota\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Escolhido \", select.lat, \" , \", select.lng]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this) : null), \";\", /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n        directions: directions,\n        options: {\n          suppressMarkers: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"details\",\n      onSubmit: handleContinue,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nameImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Events Name\",\n          type: \"text\",\n          name: \"eventsName\",\n          noValidate: true,\n          onChange: e => setEventsName(e.target.value) // values = {values}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-hourglass-half fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Duration\",\n          type: \"text\",\n          name: \"time\",\n          noValidate: true,\n          onChange: e => setTime(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"OImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-dot-circle fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 31\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"orig\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Location Beginning\",\n          type: \"text\",\n          name: \"origin\",\n          noValidate: true,\n          onChange: e => setOrigin(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Ocalendar\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-calendar-alt fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Event Date\",\n          type: \"date\",\n          name: \"date\",\n          noValidate: true,\n          onChange: e => setDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"DesImg\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-file-signature fa-2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textArea\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          placeholder: \"Event Descriprion\",\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MDBtn, {\n        children: /*#__PURE__*/_jsxDEV(MBtn, {\n          type: \"submit\",\n          children: \"Create Event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CreateEvents, \"eO9+p9W6kG5oQe5YPZBvfE22G7o=\", false, function () {\n  return [usePlacesAutocomplete];\n});\n\n_c = CreateEvents;\n;\nexport default CreateEvents;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateEvents\");","map":{"version":3,"sources":["/Users/goncalomoura/Documents/Fight4Change_Alfa/web/src/Components/Maps/Details.js"],"names":["React","useState","MDBtn","MBtn","GoogleMap","Marker","InfoWindow","DirectionsRenderer","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","LocateMDBtn","LocateMBtn","google","window","mapContainerStyle","height","width","center","lat","lng","CreateEvents","eventsName","setEventsName","date","setDate","time","setTime","origin","setOrigin","description","setDescription","directions","setState","handleContinue","e","preventDefault","console","log","request","method","headers","localStorage","getItem","body","JSON","stringify","markers","token","fetch","then","response","ok","catch","error","setMarkers","selected","setSelected","service","maps","DirectionsService","onMapClick","useCallback","current","latLng","onMarkerClick","active","mapRef","useRef","onMapLoad","map","panTo","setZoom","ready","value","suggestions","status","data","setValue","clearSuggestions","requestOptions","location","radius","handleInput","target","handleSelect","address","results","waypoints","p","stopover","length","destination","pop","route","travelMode","TravelMode","WALKING","result","DirectionsStatus","OK","onMarkerDragEnd","index","onInfoClose","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","id","marker","select","suppressMarkers"],"mappings":"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","sourcesContent":["/*global google*/\nimport {React, useState} from 'react'\nimport \"./map.css\";\nimport { MDBtn, MBtn } from './Button'\nimport { GoogleMap, Marker, InfoWindow, DirectionsRenderer } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport { LocateMDBtn, LocateMBtn } from './LocateButton'\n\nconst google = window.google;\n\nconst mapContainerStyle = {\n  height: \"80vh\",\n  width: \"50%\",\n};\n\nconst center = {\n  lat: 38.660783,\n  lng: -9.205681,\n};\n\n\nfunction CreateEvents() {\n\n\n  const[eventsName, setEventsName] = useState();\n\n const[date, setDate] = useState();\n const[time, setTime] = useState();\n const[origin, setOrigin] = useState();\n const[description, setDescription] = useState();\n \n\n  const [directions, setState] = React.useState();\n\n/*\n  const handleChange = React.useCallback((e) => {\n    const value = e.target.value;\n    setState({\n        [e.target.name]: value\n    });\n    console.log(e.target.value)\n  })*/\n\n\n\n  const handleContinue = e => {\n    e.preventDefault();\n    console.log(\"entrei no continue\")\n\n    const request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n         'Authorization': 'Bearer ' + localStorage.getItem(\"user\") \n      },\n      body: JSON.stringify({\n        eventsName: eventsName,\n        date:date,\n        origin: origin,\n        description:description,\n        time: time,\n        markers:markers,\n        token:localStorage.getItem(\"user\")\n      })\n    };\n    fetch('https://apdc-fasebeta.appspot.com/createEvent', request)\n    .then( response => {\n     \n        console.log(request.headers)\n        console.log(\"mudei1\")\n        console.log(request.body)\n        if (response.ok) {\n          console.log(\"Event successfully created!\")\n        }\n        else {\n          console.log(\"Something went wrong.\")\n\n        }\n      }).catch(error => console.error('Error', error))\n  };\n\n\n\n\n  const [markers, setMarkers] = React.useState([]);\n  const [selected, setSelected] = React.useState([]);\n  var service = new google.maps.DirectionsService();\n\n  \n\n  const onMapClick = React.useCallback((e) => {\n    setMarkers((current) => [\n      ...current,\n      {\n        lat: e.latLng.lat(),\n        lng: e.latLng.lng(),\n\n      },\n    ]);\n  }, []);\n\n  const onMarkerClick = React.useCallback((e) => {\n    setSelected((current) => [\n      ...current, {\n\n        lat: e.latLng.lat(),\n        lng: e.latLng.lng(),\n        active: true,\n      }\n    ])\n\n\n  },[])\n\n\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback((map) => {\n    mapRef.current = map;\n  }, []);\n\n  const panTo = React.useCallback(({ lat, lng }) => {\n    mapRef.current.panTo({ lat, lng });\n    mapRef.current.setZoom(20);\n  }, []);\n\n  const {\n    ready,\n    value,\n    suggestions: { status, data },\n    setValue,\n    clearSuggestions,\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: { lat: () => 38.660783, lng: () => -9.205681 },\n      radius: 100 * 1000,\n    },\n  });\n\n  const handleInput = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleSelect = async (address) => {\n    setValue(address, false);\n    clearSuggestions();\n\n    try {\n      const results = await getGeocode({ address });\n      \n      const { lat, lng } = await getLatLng(results[0]);\n      panTo({ lat, lng });\n      setMarkers((current) => [\n        ...current,\n        {\n          lat: lat,\n          lng: lng,\n\n        },\n      ]);\n      const waypoints = markers.map(p => ({\n        location: { lat: p.lat, lng: p.lng },\n        stopover: true\n      }))\n    \n      \n      if (waypoints.length >= 2) {\n        const origin = waypoints[0].location;\n        const destination = waypoints.pop().location;\n        \n    \n        service.route(\n    \n          {\n            origin: origin,\n            destination: destination,\n            travelMode: google.maps.TravelMode.WALKING,\n            waypoints: waypoints\n          },\n          (result, status) => {\n            if (status === google.maps.DirectionsStatus.OK) {\n              setState({\n                directions: result\n              }); \n            } else {\n              console.error(`error fetching directions ${result}`);\n            }\n          }\n    \n        )\n      }\n     \n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  };\n\n  const onMarkerDragEnd = (e, index) => {\n   \n    markers[index] = { ...markers[index], lat: e.latLng.lat(), lng: e.latLng.lng() }\n\n    const waypoints = markers.map(p => ({\n      location: { lat: p.lat, lng: p.lng },\n      stopover: true\n    }))\n  \n    \n    if (waypoints.length >= 2) {\n      const origin = waypoints[0].location;\n      const destination = waypoints.pop().location;\n      service.route(\n        {\n          origin: origin,\n          destination: destination,\n          travelMode: google.maps.TravelMode.WALKING,\n          waypoints: waypoints\n        },\n        (result, status) => {\n          if (status === google.maps.DirectionsStatus.OK) {\n            \n            setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        }\n  \n      )\n    }\n  \n\n\n  };\n  /* const onMarkerClick = (e,index) => { \n     console.log(index);\n     markers[index] = {...markers[index],lat: e.latLng.lat(), lng:e.latLng.lng(),active:true}\n     console.log(markers[index].active)\n   };*/\n  const onInfoClose = (e, index) => {\n    selected[index] = { ...selected[index], lat: selected[index].lat, lng: selected[index].lng, active: false }\n  }\n\n  \n\n\n  //const origin = markers[0];\n  //const destination = markers[markers.length-1];\n\n\n  const waypoints = markers.map(p => ({\n    location: { lat: p.lat, lng: p.lng },\n    stopover: true\n  }))\n\n \n  if (waypoints.length >= 2) {\n    const origin = waypoints[0].location;\n    const destination = waypoints.pop().location;\n\n    service.route(\n\n      {\n        origin: origin,\n        destination: destination,\n        travelMode: google.maps.TravelMode.WALKING,\n        waypoints: waypoints\n      },\n      (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          \n          setState({\n            directions: result\n          });\n        } else {\n          console.error(`error fetching directions ${result}`);\n        }\n      }\n\n    )\n  }\n\n  return (\n\n    <>\n      <LocateMDBtn>\n        <LocateMBtn\n          className=\"locate\"\n          onClick={() => {\n            navigator.geolocation.getCurrentPosition(\n              (position) => {\n                panTo({\n                  lat: position.coords.latitude,\n                  lng: position.coords.longitude,\n                });\n              },\n              () => null\n            );\n          }}\n        >\n          <i className=\"far fa-compass fa-2x\"></i>\n        </LocateMBtn>\n      </LocateMDBtn>\n\n\n      <div className=\"originImg\"><i className=\"fas fa-map-marker-alt fa-2x\"></i></div>\n      <div className=\"origin\">\n        <Combobox onSelect={handleSelect}>\n          <ComboboxInput\n            value={value}\n            onChange={handleInput}\n            disabled={!ready}\n            placeholder=\"Location\"\n          />\n          <ComboboxPopover>\n            <ComboboxList>\n              {status === \"OK\" &&\n                data.map(({ id, description }) => (\n                  <ComboboxOption key={id} value={description} />\n                ))}\n            </ComboboxList>\n          </ComboboxPopover>\n        </Combobox>\n\n      </div>\n\n\n      <GoogleMap\n        id=\"map\"\n        mapContainerStyle={mapContainerStyle}\n        zoom={8}\n        center={center}\n        onClick={onMapClick}\n        onLoad={onMapLoad}\n      >\n\n        {markers.map((marker, index) => (\n          <Marker\n            key={index}\n            position={{ lat: marker.lat, lng: marker.lng }}\n            draggable={true}\n            onDragEnd={(e) => onMarkerDragEnd(e, index)}\n            onClick={(e) => onMarkerClick(e, index)}\n          />\n        ))}\n\n        {selected.map((select, index) => (select.active ? (\n\n          <InfoWindow\n            position={{ lat: select.lat, lng: select.lng }}\n            onCloseClick={(e) => onInfoClose(e, index)}\n          >\n            <div>\n              <h2>\n                <span role=\"img\" aria-label=\"bear\">\n                  <i className=\"fas fa-hands-helping\"></i>\n                </span>{\" \"}\n                Paragem na Rota\n              </h2>\n              <p>Escolhido {select.lat} , {select.lng}</p>\n            </div>\n          </InfoWindow>\n        ) : null))};\n            \n            <DirectionsRenderer directions={directions}  options={{\n           \n              suppressMarkers: true\n    \n            }} ></DirectionsRenderer>\n            \n         \n\n\n\n      </GoogleMap>\n\n\n\n\n      <form className=\"details\" onSubmit={handleContinue}>\n        <div className=\"nameImg\"><i className=\"fas fa-signature fa-2x\"></i></div>\n        <div className=\"name\">\n          <input\n            placeholder=\"Events Name\"\n            type=\"text\"\n            name=\"eventsName\"\n            noValidate\n            onChange={e=>setEventsName(e.target.value)}\n          // values = {values}\n          />\n        </div>\n        <div className=\"timeImg\"><i className=\"fas fa-hourglass-half fa-2x\"></i></div>\n        <div className=\"time\">\n          <input\n            placeholder=\"Duration\"\n            type=\"text\"\n            name=\"time\"\n            noValidate\n            onChange={e => setTime(e.target.value)}\n          />\n        </div>\n        <div className=\"OImg\"><i className=\"far fa-dot-circle fa-2x\"></i></div>\n        <div className=\"orig\">\n          <input\n            placeholder=\"Event Location Beginning\"\n            type=\"text\"\n            name=\"origin\"\n            noValidate\n            onChange={e => setOrigin(e.target.value)}\n          />\n        </div>\n        <div className=\"Ocalendar\"><i className=\"far fa-calendar-alt fa-2x\"></i></div>\n        <div className=\"date\">\n          <input\n            placeholder=\"Event Date\"\n            type=\"date\"\n            name=\"date\"\n            noValidate\n            onChange={e => setDate(e.target.value)}\n          />\n        </div>\n        <div className=\"DesImg\"><i className=\"fas fa-file-signature fa-2x\" ></i></div>\n        <div className=\"textArea\">\n          <textarea\n            name=\"description\"\n            placeholder=\"Event Descriprion\"\n            onChange={e => setDescription(e.target.value)}\n\n          /></div>\n        <MDBtn>\n          <MBtn type='submit'>Create Event</MBtn>\n        </MDBtn>\n      </form>\n\n    </>\n  )\n};\n\nexport default CreateEvents\n\n"]},"metadata":{},"sourceType":"module"}